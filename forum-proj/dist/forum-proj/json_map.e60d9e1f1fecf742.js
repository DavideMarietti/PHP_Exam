"use strict";(self.webpackChunkforum_proj=self.webpackChunkforum_proj||[]).push([[750],{2729:(ae,Vt,B)=>{B.d(Vt,{GraticuleSeries:()=>he,MapChart:()=>Ge,MapLine:()=>Ht,MapLineSeries:()=>Yt,MapPointSeries:()=>Xe,MapPolygon:()=>oe,MapPolygonSeries:()=>Ye,MapSeries:()=>j,ZoomControl:()=>Be});var St=B(6433),A=B(9660),yt=B(533);class j extends St.F{constructor(){super(...arguments),Object.defineProperty(this,"_types",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_geometries",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_geoJSONparsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_excluded",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_notIncluded",{enumerable:!0,configurable:!0,writable:!0,value:[]})}_afterNew(){this.fields.push("geometry","geometryType"),this._setRawDefault("geometryField","geometry"),this._setRawDefault("geometryTypeField","geometryType"),this._setRawDefault("idField","id"),this.on("geoJSON",t=>{let e=this._prevSettings.geoJSON;e&&e!=t&&this.data.clear()}),super._afterNew()}_prepareChildren(){if(super._prepareChildren(),this._valuesDirty||this.isDirty("geoJSON")||this.isDirty("include")||this.isDirty("exclude")){const t=this.get("geoJSON");let e=this._prevSettings.geoJSON;e&&e!=t&&(this._prevSettings.geoJSON=void 0,this._geoJSONparsed=!1),this._geoJSONparsed||(this._parseGeoJSON(),this._geoJSONparsed=!0);const i=this.chart,r=this.get("exclude");r&&(i&&(i._centerLocation=null),A.S6(r,s=>{const a=this.getDataItemById(s);a&&this._excludeDataItem(a)})),(!r||0==r.length)&&(A.S6(this._excluded,s=>{this._unexcludeDataItem(s)}),this._excluded=[]);const o=this.get("include");o&&(i&&(i._centerLocation=null),A.S6(this.dataItems,s=>{const a=s.get("id");a&&-1==o.indexOf(a)?this._notIncludeDataItem(s):this._unNotIncludeDataItem(s)})),o||(A.S6(this._notIncluded,s=>{this._unNotIncludeDataItem(s)}),this._notIncluded=[])}}_excludeDataItem(t){this._removeGeometry(t.get("geometry")),A.pB(this._excluded,t)}_unexcludeDataItem(t){this._addGeometry(t.get("geometry"),this)}_notIncludeDataItem(t){this._removeGeometry(t.get("geometry")),A.pB(this._notIncluded,t)}_unNotIncludeDataItem(t){this._addGeometry(t.get("geometry"),this)}checkInclude(t,e,i){if(e){if(0==e.length)return!1;if(-1==e.indexOf(t))return!1}return!(i&&i.length>0&&-1!=i.indexOf(t))}_parseGeoJSON(){const t=this.get("geoJSON");if(t){let e;"FeatureCollection"==t.type?e=t.features:"Feature"==t.type?e=[t]:-1!=["Point","LineString","Polygon","MultiPoint","MultiLineString","MultiPolygon"].indexOf(t.type)?e=[{geometry:t}]:console.log("nothing found in geoJSON");const i=this.get("geodataNames");if(e){const o=this.get("idField","id");for(let s=0,a=e.length;s<a;s++){let u=e[s],c=u.geometry;if(c){let l=c.type,h=u[o];if(i&&i[h]&&(u.properties.name=i[h]),-1!=this._types.indexOf(l)){let f,p;null!=h&&(f=A.sE(this.dataItems,g=>g.get("id")==h)),f&&(p=f.dataContext),f?p.geometry||(p.geometry=c,p.geometryType=l,f.set("geometry",c),f.set("geometryType",l),this.processDataItem(f)):(p={geometry:c,geometryType:l,madeFromGeoData:!0},p[o]=h,this.data.push(p)),yt.VN(u.properties,p)}}}}const r="geodataprocessed";this.events.isEnabled(r)&&this.events.dispatch(r,{type:r,target:this})}}_placeBulletsContainer(t){this.children.moveValue(this.bulletsContainer)}_removeBulletsContainer(){}projection(){const t=this.chart;if(t)return t.get("projection")}geoPath(){const t=this.chart;if(t)return t.getPrivate("geoPath")}_addGeometry(t,e){if(t&&e.get("affectsBounds",!0)){this._geometries.push(t);const i=this.chart;i&&i.markDirtyGeometries()}}_removeGeometry(t){if(t){A.Od(this._geometries,t);const e=this.chart;e&&e.markDirtyGeometries()}}_dispose(){super._dispose();const t=this.chart;t&&t.series.removeValue(this)}_onDataClear(){super._onDataClear(),this._geoJSONparsed=!1}}Object.defineProperty(j,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapSeries"}),Object.defineProperty(j,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:St.F.classNames.concat([j.className])});var k=B(8256),K=B(1872),ct=B(314);class C{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const o=e[r],s=t+o,a=Math.abs(t)<Math.abs(o)?t-(s-o):o-(s-t);a&&(e[i++]=a),t=s}return e[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let i,r,o,e=this._n,s=0;if(e>0){for(s=t[--e];e>0&&(i=s,r=t[--e],s=i+r,o=r-(s-i),!o););e>0&&(o<0&&t[e-1]<0||o>0&&t[e-1]>0)&&(r=2*o,i=s+r,r==i-s&&(s=i))}return s}}var w=1e-6,F=1e-12,D=Math.PI,R=D/2,Z=D/4,O=2*D,z=180/D,S=D/180,T=Math.abs,tt=Math.atan,ot=Math.atan2,x=Math.cos,Lt=Math.ceil,$t=Math.exp,Gt=(Math,Math.hypot),Jt=Math.log,M=(Math,Math.sin),Ii=Math.sign||function(n){return n>0?1:n<0?-1:0},gt=Math.sqrt,zi=Math.tan;function Et(n){return n>1?R:n<-1?-R:Math.asin(n)}function Dn(n){return(n=M(n/2))*n}function J(){}function le(n,t){n&&Cn.hasOwnProperty(n.type)&&Cn[n.type](n,t)}var xn={Feature:function(n,t){le(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,i=-1,r=e.length;++i<r;)le(e[i].geometry,t)}},Cn={Sphere:function(n,t){t.sphere()},Point:function(n,t){t.point((n=n.coordinates)[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)t.point((n=e[i])[0],n[1],n[2])},LineString:function(n,t){ke(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)ke(e[i],t,0)},Polygon:function(n,t){Mn(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,i=-1,r=e.length;++i<r;)Mn(e[i],t)},GeometryCollection:function(n,t){for(var e=n.geometries,i=-1,r=e.length;++i<r;)le(e[i],t)}};function ke(n,t,e){var o,i=-1,r=n.length-e;for(t.lineStart();++i<r;)t.point((o=n[i])[0],o[1],o[2]);t.lineEnd()}function Mn(n,t){var e=-1,i=n.length;for(t.polygonStart();++e<i;)ke(n[e],t,1);t.polygonEnd()}function _t(n,t){n&&xn.hasOwnProperty(n.type)?xn[n.type](n,t):le(n,t)}var Ze,Fe,ue,ce,Xt={sphere:J,point:J,lineStart:function Xi(){Xt.point=Bi,Xt.lineEnd=Yi},lineEnd:J,polygonStart:J,polygonEnd:J};function Yi(){Xt.point=Xt.lineEnd=J}function Bi(n,t){Fe=n*=S,ue=M(t*=S),ce=x(t),Xt.point=Ai}function Ai(n,t){n*=S;var e=M(t*=S),i=x(t),r=T(n-Fe),o=x(r),a=i*M(r),u=ce*e-ue*i*o,c=ue*e+ce*i*o;Ze.add(ot(gt(a*a+u*u),c)),Fe=n,ue=e,ce=i}function Ln(n){return Ze=new C,_t(n,Xt),+Ze}var We=[null,null],ki={type:"LineString",coordinates:We};function Zi(n,t){return We[0]=n,We[1]=t,Ln(ki)}class Ht extends ct.T{constructor(){super(...arguments),Object.defineProperty(this,"_projectionDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_beforeChanged(){if(super._beforeChanged(),this._projectionDirty||this.isDirty("geometry")||this.isDirty("precision")){const t=this.get("geometry");if(t){const i=this.getPrivate("series");if(i){const r=i.chart;if(r){const o=r.get("projection");let s=null;o&&o.clipAngle&&(s=o.clipAngle(),o.precision(this.get("precision",.5)));const a=this.dataItem,u=r.getPrivate("geoPath");if(u&&a)if(this._clear=!0,"straight"==a.get("lineType",i.get("lineType"))){const c=this.get("geometry");if(c){let l=c.coordinates;if(l){let h;"LineString"==c.type?h=[l]:"MultiLineString"==c.type&&(h=l),this.set("draw",f=>{for(let p=0;p<h.length;p++){let g=h[p];if(g.length>0){const y=g[0],m=r.convert({longitude:y[0],latitude:y[1]});f.lineTo(m.x,m.y);for(let v=0;v<g.length;v++){const P=g[v],d=r.convert({longitude:P[0],latitude:P[1]});f.lineTo(d.x,d.y)}}}})}}}else this.set("draw",c=>{o&&!1===i.get("clipBack")&&o.clipAngle(180),u.context(this._display),u(t),u.context(null),o&&o.clipAngle&&o.clipAngle(s)})}}}const e="linechanged";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this})}}markDirtyProjection(){this.markDirty(),this._projectionDirty=!0}_clearDirty(){super._clearDirty(),this._projectionDirty=!1}_getTooltipPoint(){let t=this.get("tooltipX"),e=this.get("tooltipY"),i=0,r=0;if(k.hj(t)&&(i=t),k.hj(e)&&(r=e),t instanceof K.gG){const o=this.positionToGeoPoint(t.value),s=this.getPrivate("series");if(s){const a=s.chart;if(a){const u=a.convert(o);i=u.x,r=u.y}}}return{x:i,y:r}}positionToGeoPoint(t){const e=this.get("geometry"),i=this.getPrivate("series"),r=i.chart,o=this.dataItem;if(e&&i&&r&&o){const s=o.get("lineType",i.get("lineType"));let c,f,p,a=Ln(e),u=0,l=0,h=0,g=e.coordinates;if(g){let y;"LineString"==e.type?y=[g]:"MultiLineString"==e.type&&(y=g);for(let m=0;m<y.length;m++){let v=y[m];if(v.length>1){for(let P=1;P<v.length;P++)if(f=v[P-1],p=v[P],l=u/a,c=Zi(f,p),u+=c,h=u/a,l<=t&&h>t){m=y.length;break}}else 1==v.length&&(f=v[0],p=v[0],l=0,h=1)}if(f&&p){let v,m=(t-l)/(h-l);if("straight"==s){let P=r.convert({longitude:f[0],latitude:f[1]}),d=r.convert({longitude:p[0],latitude:p[1]});return r.invert({x:P.x+(d.x-P.x)*m,y:P.y+(d.y-P.y)*m})}return v=function Fi(n,t){var e=n[0]*S,i=n[1]*S,r=t[0]*S,o=t[1]*S,s=x(i),a=M(i),u=x(o),c=M(o),l=s*x(e),h=s*M(e),f=u*x(r),p=u*M(r),g=2*Et(gt(Dn(o-i)+s*u*Dn(r-e))),y=M(g),m=g?function(v){var P=M(v*=g)/y,d=M(g-v)/y,b=d*l+P*f,L=d*h+P*p,E=d*a+P*c;return[ot(L,b)*z,ot(E,gt(b*b+L*L))*z]}:function(){return[e*z,i*z]};return m.distance=g,m}(f,p)(m),{longitude:v[0],latitude:v[1]}}}}return{longitude:0,latitude:0}}}Object.defineProperty(Ht,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapLine"}),Object.defineProperty(Ht,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ct.T.classNames.concat([Ht.className])});var En=B(7379),jn=B(5344);class Yt extends j{constructor(){super(...arguments),Object.defineProperty(this,"mapLines",{enumerable:!0,configurable:!0,writable:!0,value:new En.o(jn.YS.new({}),()=>Ht._new(this._root,{},[this.mapLines.template]))}),Object.defineProperty(this,"_types",{enumerable:!0,configurable:!0,writable:!0,value:["LineString","MultiLineString"]})}_afterNew(){this.fields.push("lineType"),this._setRawDefault("lineTypeField","lineType"),super._afterNew()}makeMapLine(t){const e=this.children.push(this.mapLines.make());return e._setDataItem(t),this.mapLines.push(e),e}markDirtyProjection(){A.S6(this.dataItems,t=>{let e=t.get("mapLine");e&&e.markDirtyProjection()})}_prepareChildren(){super._prepareChildren(),this.isDirty("stroke")&&this.mapLines.template.set("stroke",this.get("stroke"))}processDataItem(t){super.processDataItem(t);let e=t.get("mapLine");e||(e=this.makeMapLine(t)),this._handlePointsToConnect(t),t.on("pointsToConnect",()=>{this._handlePointsToConnect(t)}),t.set("mapLine",e),this._addGeometry(t.get("geometry"),this),e.setPrivate("series",this)}_handlePointsToConnect(t){const e=t.get("pointsToConnect");e&&(A.S6(e,i=>{i.on("geometry",()=>{this.markDirtyValues(t)}),i.on("longitude",()=>{this.markDirtyValues(t)}),i.on("latitude",()=>{this.markDirtyValues(t)})}),this.markDirtyValues(t))}markDirtyValues(t){if(super.markDirtyValues(),t){const e=t.get("mapLine");if(e){const i=t.get("pointsToConnect");if(i){let r=[];A.S6(i,s=>{const a=s.get("longitude"),u=s.get("latitude");if(null!=a&&null!=u)r.push([a,u]);else{const c=s.get("geometry");if(c){const l=c.coordinates;l&&r.push([l[0],l[1]])}}});let o={type:"LineString",coordinates:r};t.setRaw("geometry",o),e.set("geometry",o)}else e.set("geometry",t.get("geometry"))}}}disposeDataItem(t){super.disposeDataItem(t);const e=t.get("mapLine");e&&(this.mapLines.removeValue(e),e.dispose())}_excludeDataItem(t){super._excludeDataItem(t);const e=t.get("mapLine");e&&e.setPrivate("visible",!1)}_unexcludeDataItem(t){super._unexcludeDataItem(t);const e=t.get("mapLine");e&&e.setPrivate("visible",!0)}_notIncludeDataItem(t){super._notIncludeDataItem(t);const e=t.get("mapLine");e&&e.setPrivate("visible",!1)}_unNotIncludeDataItem(t){super._unNotIncludeDataItem(t);const e=t.get("mapLine");e&&e.setPrivate("visible",!0)}}function Bt(n,t,e){n=+n,t=+t,e=(r=arguments.length)<2?(t=n,n=0,1):r<3?1:+e;for(var i=-1,r=0|Math.max(0,Math.ceil((t-n)/e)),o=new Array(r);++i<r;)o[i]=n+i*e;return o}function Nn(n,t,e){var i=Bt(n,t-w,e).concat(t);return function(r){return i.map(function(o){return[r,o]})}}function Tn(n,t,e){var i=Bt(n,t-w,e).concat(t);return function(r){return i.map(function(o){return[o,r]})}}Object.defineProperty(Yt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapLineSeries"}),Object.defineProperty(Yt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:j.classNames.concat([Yt.className])});class he extends Yt{constructor(){super(...arguments),Object.defineProperty(this,"_dataItem",{enumerable:!0,configurable:!0,writable:!0,value:this.makeDataItem({})})}_afterNew(){super._afterNew(),this.dataItems.push(this._dataItem),this._generate()}_updateChildren(){if(super._updateChildren(),this.isDirty("step")&&this._generate(),this.isDirty("clipExtent")&&this.get("clipExtent")){const t=this.chart;t&&t.events.on("geoboundschanged",()=>{this._generate()}),this._generate()}}_generate(){let t=function On(){var n,t,e,i,r,o,s,a,f,p,g,y,u=10,c=u,l=90,h=360,m=2.5;function v(){return{type:"MultiLineString",coordinates:P()}}function P(){return Bt(Lt(i/l)*l,e,l).map(g).concat(Bt(Lt(a/h)*h,s,h).map(y)).concat(Bt(Lt(t/u)*u,n,u).filter(function(d){return T(d%l)>w}).map(f)).concat(Bt(Lt(o/c)*c,r,c).filter(function(d){return T(d%h)>w}).map(p))}return v.lines=function(){return P().map(function(d){return{type:"LineString",coordinates:d}})},v.outline=function(){return{type:"Polygon",coordinates:[g(i).concat(y(s).slice(1),g(e).reverse().slice(1),y(a).reverse().slice(1))]}},v.extent=function(d){return arguments.length?v.extentMajor(d).extentMinor(d):v.extentMinor()},v.extentMajor=function(d){return arguments.length?(a=+d[0][1],s=+d[1][1],(i=+d[0][0])>(e=+d[1][0])&&(d=i,i=e,e=d),a>s&&(d=a,a=s,s=d),v.precision(m)):[[i,a],[e,s]]},v.extentMinor=function(d){return arguments.length?(o=+d[0][1],r=+d[1][1],(t=+d[0][0])>(n=+d[1][0])&&(d=t,t=n,n=d),o>r&&(d=o,o=r,r=d),v.precision(m)):[[t,o],[n,r]]},v.step=function(d){return arguments.length?v.stepMajor(d).stepMinor(d):v.stepMinor()},v.stepMajor=function(d){return arguments.length?(l=+d[0],h=+d[1],v):[l,h]},v.stepMinor=function(d){return arguments.length?(u=+d[0],c=+d[1],v):[u,c]},v.precision=function(d){return arguments.length?(m=+d,f=Nn(o,r,90),p=Tn(t,n,m),g=Nn(a,s,90),y=Tn(i,e,m),v):m},v.extentMajor([[-180,-90+w],[180,90-w]]).extentMinor([[-180,-80-w],[180,80+w]])}();if(t){if(this.get("clipExtent")){const i=this.chart;if(i){const r=i.geoBounds();r&&t.extent([[r.left,r.bottom],[r.right,r.top]])}}const e=this.get("step",10);t.stepMinor([360,360]),t.stepMajor([e,e]),this._dataItem.set("geometry",t())}}}Object.defineProperty(he,"className",{enumerable:!0,configurable:!0,writable:!0,value:"GraticuleSeries"}),Object.defineProperty(he,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Yt.classNames.concat([he.className])});var Wi=B(2056),Ve=B(8707);function $e(n,t){function e(i,r){return i=n(i,r),t(i[0],i[1])}return n.invert&&t.invert&&(e.invert=function(i,r){return(i=t.invert(i,r))&&n.invert(i[0],i[1])}),e}function Je(n,t){return T(n)>D&&(n-=Math.round(n/O)*O),[n,t]}function Rn(n,t,e){return(n%=O)?t||e?$e(zn(n),Gn(t,e)):zn(n):t||e?Gn(t,e):Je}function In(n){return function(t,e){return T(t+=n)>D&&(t-=Math.round(t/O)*O),[t,e]}}function zn(n){var t=In(n);return t.invert=In(-n),t}function Gn(n,t){var e=x(n),i=M(n),r=x(t),o=M(t);function s(a,u){var c=x(u),l=x(a)*c,h=M(a)*c,f=M(u),p=f*e+l*i;return[ot(h*r-p*o,l*e-f*i),Et(p*r+h*o)]}return s.invert=function(a,u){var c=x(u),l=x(a)*c,h=M(a)*c,f=M(u),p=f*r-h*o;return[ot(h*r+f*o,l*e+p*i),Et(p*e-l*i)]},s}function Xn(){var t,n=[];return{point:function(e,i,r){t.push([e,i,r])},lineStart:function(){n.push(t=[])},lineEnd:J,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function fe(n,t){return T(n[0]-t[0])<w&&T(n[1]-t[1])<w}function pe(n,t,e,i){this.x=n,this.z=t,this.o=e,this.e=i,this.v=!1,this.n=this.p=null}function Yn(n,t,e,i,r){var a,u,o=[],s=[];if(n.forEach(function(g){if(!((y=g.length-1)<=0)){var y,P,m=g[0],v=g[y];if(fe(m,v)){if(!m[2]&&!v[2]){for(r.lineStart(),a=0;a<y;++a)r.point((m=g[a])[0],m[1]);return void r.lineEnd()}v[0]+=2*w}o.push(P=new pe(m,g,null,!0)),s.push(P.o=new pe(m,null,P,!1)),o.push(P=new pe(v,g,null,!1)),s.push(P.o=new pe(v,null,P,!0))}}),o.length){for(s.sort(t),Bn(o),Bn(s),a=0,u=s.length;a<u;++a)s[a].e=e=!e;for(var l,h,c=o[0];;){for(var f=c,p=!0;f.v;)if((f=f.n)===c)return;l=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(a=0,u=l.length;a<u;++a)r.point((h=l[a])[0],h[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(p)for(a=(l=f.p.z).length-1;a>=0;--a)r.point((h=l[a])[0],h[1]);else i(f.x,f.p.x,-1,r);f=f.p}l=(f=f.o).z,p=!p}while(!f.v);r.lineEnd()}}}function Bn(n){if(t=n.length){for(var t,r,e=0,i=n[0];++e<t;)i.n=r=n[e],r.p=i,i=r;i.n=r=n[0],r.p=i}}function ge(n){return[ot(n[1],n[0]),Et(n[2])]}function Tt(n){var t=n[0],e=n[1],i=x(e);return[i*x(t),i*M(t),M(e)]}function de(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function At(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function He(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function me(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function ye(n){var t=gt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function Qe(n){return T(n[0])<=D?n[0]:Ii(n[0])*((T(n[0])+D)%O-D)}function An(n){return Array.from(function*Ji(n){for(const t of n)yield*t}(n))}function kn(n,t,e,i){return function(r){var c,l,h,o=t(r),s=Xn(),a=t(s),u=!1,f={point:p,lineStart:y,lineEnd:m,polygonStart:function(){f.point=v,f.lineStart=P,f.lineEnd=d,l=[],c=[]},polygonEnd:function(){f.point=p,f.lineStart=y,f.lineEnd=m,l=An(l);var b=function $i(n,t){var e=Qe(t),i=t[1],r=M(i),o=[M(e),-x(e),0],s=0,a=0,u=new C;1===r?i=R+w:-1===r&&(i=-R-w);for(var c=0,l=n.length;c<l;++c)if(f=(h=n[c]).length)for(var h,f,p=h[f-1],g=Qe(p),y=p[1]/2+Z,m=M(y),v=x(y),P=0;P<f;++P,g=b,m=E,v=W,p=d){var d=h[P],b=Qe(d),L=d[1]/2+Z,E=M(L),W=x(L),G=b-g,X=G>=0?1:-1,$=X*G,N=$>D,lt=m*E;if(u.add(ot(lt*X*M($),v*W+lt*x($))),s+=N?G+X*O:G,N^g>=e^b>=e){var U=At(Tt(p),Tt(d));ye(U);var V=At(o,U);ye(V);var _=(N^G>=0?-1:1)*Et(V[2]);(i>_||i===_&&(U[0]||U[1]))&&(a+=N^G>=0?1:-1)}}return(s<-w||s<w&&u<-F)^1&a}(c,i);l.length?(u||(r.polygonStart(),u=!0),Yn(l,Qi,b,e,r)):b&&(u||(r.polygonStart(),u=!0),r.lineStart(),e(null,null,1,r),r.lineEnd()),u&&(r.polygonEnd(),u=!1),l=c=null},sphere:function(){r.polygonStart(),r.lineStart(),e(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(b,L){n(b,L)&&r.point(b,L)}function g(b,L){o.point(b,L)}function y(){f.point=g,o.lineStart()}function m(){f.point=p,o.lineEnd()}function v(b,L){h.push([b,L]),a.point(b,L)}function P(){a.lineStart(),h=[]}function d(){v(h[0][0],h[0][1]),a.lineEnd();var E,G,X,$,b=a.clean(),L=s.result(),W=L.length;if(h.pop(),c.push(h),h=null,W){if(1&b){if((G=(X=L[0]).length-1)>0){for(u||(r.polygonStart(),u=!0),r.lineStart(),E=0;E<G;++E)r.point(($=X[E])[0],$[1]);r.lineEnd()}return}W>1&&2&b&&L.push(L.pop().concat(L.shift())),l.push(L.filter(Hi))}}return f}}function Hi(n){return n.length>1}function Qi(n,t){return((n=n.x)[0]<0?n[1]-R-w:R-n[1])-((t=t.x)[0]<0?t[1]-R-w:R-t[1])}Je.invert=Je;const Zn=kn(function(){return!0},function Ui(n){var r,t=NaN,e=NaN,i=NaN;return{lineStart:function(){n.lineStart(),r=1},point:function(o,s){var a=o>0?D:-D,u=T(o-t);T(u-D)<w?(n.point(t,e=(e+s)/2>0?R:-R),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(a,e),n.point(o,e),r=0):i!==a&&u>=D&&(T(t-i)<w&&(t-=i*w),T(o-a)<w&&(o-=a*w),e=function Ki(n,t,e,i){var r,o,s=M(n-e);return T(s)>w?tt((M(t)*(o=x(i))*M(e)-M(i)*(r=x(t))*M(n))/(r*o*s)):(t+i)/2}(t,e,o,s),n.point(i,e),n.lineEnd(),n.lineStart(),n.point(a,e),r=0),n.point(t=o,e=s),i=a},lineEnd:function(){n.lineEnd(),t=e=NaN},clean:function(){return 2-r}}},function qi(n,t,e,i){var r;if(null==n)i.point(-D,r=e*R),i.point(0,r),i.point(D,r),i.point(D,0),i.point(D,-r),i.point(0,-r),i.point(-D,-r),i.point(-D,0),i.point(-D,r);else if(T(n[0]-t[0])>w){var o=n[0]<t[0]?D:-D;i.point(-o,r=e*o/2),i.point(0,r),i.point(o,r)}else i.point(t[0],t[1])},[-D,-R]);function Wn(n,t){(t=Tt(t))[0]-=n,ye(t);var e=function Gi(n){return n>1?0:n<-1?D:Math.acos(n)}(-t[1]);return((-t[2]<0?-e:e)+O-w)%O}var Qt=1e9,ve=-Qt;const Ue=n=>n;function _e(n){return function(t){var e=new Ke;for(var i in n)e[i]=n[i];return e.stream=t,e}}function Ke(){}Ke.prototype={constructor:Ke,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var kt=1/0,Pe=kt,Ut=-kt,we=Ut;const be={point:function rr(n,t){n<kt&&(kt=n),n>Ut&&(Ut=n),t<Pe&&(Pe=t),t>we&&(we=t)},lineStart:J,lineEnd:J,polygonStart:J,polygonEnd:J,result:function(){var n=[[kt,Pe],[Ut,we]];return Ut=we=-(Pe=kt=1/0),n}};function qe(n,t,e){var i=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),null!=i&&n.clipExtent(null),_t(e,n.stream(be)),t(be.result()),null!=i&&n.clipExtent(i),n}function Vn(n,t,e){return qe(n,function(i){var r=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=Math.min(r/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),a=+t[0][0]+(r-s*(i[1][0]+i[0][0]))/2,u=+t[0][1]+(o-s*(i[1][1]+i[0][1]))/2;n.scale(150*s).translate([a,u])},e)}var $n=16,lr=x(30*S);function Jn(n,t){return+t?function cr(n,t){function e(i,r,o,s,a,u,c,l,h,f,p,g,y,m){var v=c-i,P=l-r,d=v*v+P*P;if(d>4*t&&y--){var b=s+f,L=a+p,E=u+g,W=gt(b*b+L*L+E*E),G=Et(E/=W),X=T(T(E)-1)<w||T(o-h)<w?(o+h)/2:ot(L,b),$=n(X,G),N=$[0],lt=$[1],U=N-i,V=lt-r,_=P*U-v*V;(_*_/d>t||T((v*U+P*V)/d-.5)>.3||s*f+a*p+u*g<lr)&&(e(i,r,o,s,a,u,N,lt,X,b/=W,L/=W,E,y,m),m.point(N,lt),e(N,lt,X,b,L,E,c,l,h,f,p,g,y,m))}}return function(i){var r,o,s,a,u,c,l,h,f,p,g,y,m={point:v,lineStart:P,lineEnd:b,polygonStart:function(){i.polygonStart(),m.lineStart=L},polygonEnd:function(){i.polygonEnd(),m.lineStart=P}};function v(G,X){G=n(G,X),i.point(G[0],G[1])}function P(){h=NaN,m.point=d,i.lineStart()}function d(G,X){var $=Tt([G,X]),N=n(G,X);e(h,f,l,p,g,y,h=N[0],f=N[1],l=G,p=$[0],g=$[1],y=$[2],$n,i),i.point(h,f)}function b(){m.point=v,i.lineEnd()}function L(){P(),m.point=E,m.lineEnd=W}function E(G,X){d(r=G,X),o=h,s=f,a=p,u=g,c=y,m.point=d}function W(){e(h,f,l,p,g,y,o,s,r,a,u,c,$n,i),m.lineEnd=b,b()}return m}}(n,t):function ur(n){return _e({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}})}(n)}var hr=_e({point:function(n,t){this.stream.point(n*S,t*S)}});function Hn(n,t,e,i,r,o){if(!o)return function pr(n,t,e,i,r){function o(s,a){return[t+n*(s*=i),e-n*(a*=r)]}return o.invert=function(s,a){return[(s-t)/n*i,(e-a)/n*r]},o}(n,t,e,i,r);var s=x(o),a=M(o),u=s*n,c=a*n,l=s/n,h=a/n,f=(a*e-s*t)/n,p=(a*t+s*e)/n;function g(y,m){return[u*(y*=i)-c*(m*=r)+t,e-c*y-u*m]}return g.invert=function(y,m){return[i*(l*y-h*m+f),r*(p-h*y-l*m)]},g}function gr(n){return function dr(n){var t,l,v,P,d,E,W,G,X,$,e=150,i=480,r=250,o=0,s=0,a=0,u=0,c=0,h=0,f=1,p=1,g=null,y=Zn,m=null,b=Ue,L=.5;function N(_){return G(_[0]*S,_[1]*S)}function lt(_){return(_=G.invert(_[0],_[1]))&&[_[0]*z,_[1]*z]}function U(){var _=Hn(e,0,0,f,p,h).apply(null,t(o,s)),I=Hn(e,i-_[0],r-_[1],f,p,h);return l=Rn(a,u,c),W=$e(t,I),G=$e(l,W),E=Jn(W,L),V()}function V(){return X=$=null,N}return N.stream=function(_){return X&&$===_?X:X=hr(function fr(n){return _e({point:function(t,e){var i=n(t,e);return this.stream.point(i[0],i[1])}})}(l)(y(E(b($=_)))))},N.preclip=function(_){return arguments.length?(y=_,g=void 0,V()):y},N.postclip=function(_){return arguments.length?(b=_,m=v=P=d=null,V()):b},N.clipAngle=function(_){return arguments.length?(y=+_?function tr(n){var t=x(n),e=6*S,i=t>0,r=T(t)>w;function s(l,h){return x(l)*x(h)>t}function u(l,h,f){var y=[1,0,0],m=At(Tt(l),Tt(h)),v=de(m,m),P=m[0],d=v-P*P;if(!d)return!f&&l;var b=t*v/d,L=-t*P/d,E=At(y,m),W=me(y,b);He(W,me(m,L));var X=E,$=de(W,X),N=de(X,X),lt=$*$-N*(de(W,W)-1);if(!(lt<0)){var U=gt(lt),V=me(X,(-$-U)/N);if(He(V,W),V=ge(V),!f)return V;var pt,_=l[0],I=h[0],et=l[1],ut=h[1];I<_&&(pt=_,_=I,I=pt);var se=I-_,Ct=T(se-D)<w;if(!Ct&&ut<et&&(pt=et,et=ut,ut=pt),Ct||se<w?Ct?et+ut>0^V[1]<(T(V[0]-_)<w?et:ut):et<=V[1]&&V[1]<=ut:se>D^(_<=V[0]&&V[0]<=I)){var Mt=me(X,(-$+U)/N);return He(Mt,W),[V,ge(Mt)]}}}function c(l,h){var f=i?n:D-n,p=0;return l<-f?p|=1:l>f&&(p|=2),h<-f?p|=4:h>f&&(p|=8),p}return kn(s,function a(l){var h,f,p,g,y;return{lineStart:function(){g=p=!1,y=1},point:function(m,v){var d,P=[m,v],b=s(m,v),L=i?b?0:c(m,v):b?c(m+(m<0?D:-D),v):0;if(!h&&(g=p=b)&&l.lineStart(),b!==p&&(!(d=u(h,P))||fe(h,d)||fe(P,d))&&(P[2]=1),b!==p)y=0,b?(l.lineStart(),d=u(P,h),l.point(d[0],d[1])):(d=u(h,P),l.point(d[0],d[1],2),l.lineEnd()),h=d;else if(r&&h&&i^b){var E;!(L&f)&&(E=u(P,h,!0))&&(y=0,i?(l.lineStart(),l.point(E[0][0],E[0][1]),l.point(E[1][0],E[1][1]),l.lineEnd()):(l.point(E[1][0],E[1][1]),l.lineEnd(),l.lineStart(),l.point(E[0][0],E[0][1],3)))}b&&(!h||!fe(h,P))&&l.point(P[0],P[1]),h=P,p=b,f=L},lineEnd:function(){p&&l.lineEnd(),h=null},clean:function(){return y|(g&&p)<<1}}},function o(l,h,f,p){!function Fn(n,t,e,i,r,o){if(e){var s=x(t),a=M(t),u=i*e;null==r?(r=t+i*O,o=t-u/2):(r=Wn(s,r),o=Wn(s,o),(i>0?r<o:r>o)&&(r+=i*O));for(var c,l=r;i>0?l>o:l<o;l-=u)c=ge([s,-a*x(l),-a*M(l)]),n.point(c[0],c[1])}}(p,n,e,f,l,h)},i?[0,-n]:[-D,n-D])}(g=_*S):(g=null,Zn),V()):g*z},N.clipExtent=function(_){return arguments.length?(b=null==_?(m=v=P=d=null,Ue):function nr(n,t,e,i){function r(c,l){return n<=c&&c<=e&&t<=l&&l<=i}function o(c,l,h,f){var p=0,g=0;if(null==c||(p=s(c,h))!==(g=s(l,h))||u(c,l)<0^h>0)do{f.point(0===p||3===p?n:e,p>1?i:t)}while((p=(p+h+4)%4)!==g);else f.point(l[0],l[1])}function s(c,l){return T(c[0]-n)<w?l>0?0:3:T(c[0]-e)<w?l>0?2:1:T(c[1]-t)<w?l>0?1:0:l>0?3:2}function a(c,l){return u(c.x,l.x)}function u(c,l){var h=s(c,1),f=s(l,1);return h!==f?h-f:0===h?l[1]-c[1]:1===h?c[0]-l[0]:2===h?c[1]-l[1]:l[0]-c[0]}return function(c){var f,p,g,y,m,v,P,d,b,L,E,l=c,h=Xn(),W={point:G,lineStart:function lt(){W.point=V,p&&p.push(g=[]),L=!0,b=!1,P=d=NaN},lineEnd:function U(){f&&(V(y,m),v&&b&&h.rejoin(),f.push(h.result())),W.point=G,b&&l.lineEnd()},polygonStart:function $(){l=h,f=[],p=[],E=!0},polygonEnd:function N(){var _=function X(){for(var _=0,I=0,et=p.length;I<et;++I)for(var zt,Mt,ut=p[I],pt=1,se=ut.length,Ct=ut[0],Ae=Ct[0],Wt=Ct[1];pt<se;++pt)zt=Ae,Mt=Wt,Ae=(Ct=ut[pt])[0],Wt=Ct[1],Mt<=i?Wt>i&&(Ae-zt)*(i-Mt)>(Wt-Mt)*(n-zt)&&++_:Wt<=i&&(Ae-zt)*(i-Mt)<(Wt-Mt)*(n-zt)&&--_;return _}(),I=E&&_,et=(f=An(f)).length;(I||et)&&(c.polygonStart(),I&&(c.lineStart(),o(null,null,1,c),c.lineEnd()),et&&Yn(f,a,_,o,c),c.polygonEnd()),l=c,f=p=g=null}};function G(_,I){r(_,I)&&l.point(_,I)}function V(_,I){var et=r(_,I);if(p&&g.push([_,I]),L)y=_,m=I,v=et,L=!1,et&&(l.lineStart(),l.point(_,I));else if(et&&b)l.point(_,I);else{var ut=[P=Math.max(ve,Math.min(Qt,P)),d=Math.max(ve,Math.min(Qt,d))],pt=[_=Math.max(ve,Math.min(Qt,_)),I=Math.max(ve,Math.min(Qt,I))];!function er(n,t,e,i,r,o){var g,s=n[0],a=n[1],l=0,h=1,f=t[0]-s,p=t[1]-a;if(g=e-s,f||!(g>0)){if(g/=f,f<0){if(g<l)return;g<h&&(h=g)}else if(f>0){if(g>h)return;g>l&&(l=g)}if(g=r-s,f||!(g<0)){if(g/=f,f<0){if(g>h)return;g>l&&(l=g)}else if(f>0){if(g<l)return;g<h&&(h=g)}if(g=i-a,p||!(g>0)){if(g/=p,p<0){if(g<l)return;g<h&&(h=g)}else if(p>0){if(g>h)return;g>l&&(l=g)}if(g=o-a,p||!(g<0)){if(g/=p,p<0){if(g>h)return;g>l&&(l=g)}else if(p>0){if(g<l)return;g<h&&(h=g)}return l>0&&(n[0]=s+l*f,n[1]=a+l*p),h<1&&(t[0]=s+h*f,t[1]=a+h*p),!0}}}}}(ut,pt,n,t,e,i)?et&&(l.lineStart(),l.point(_,I),E=!1):(b||(l.lineStart(),l.point(ut[0],ut[1])),l.point(pt[0],pt[1]),et||l.lineEnd(),E=!1)}P=_,d=I,b=et}return W}}(m=+_[0][0],v=+_[0][1],P=+_[1][0],d=+_[1][1]),V()):null==m?null:[[m,v],[P,d]]},N.scale=function(_){return arguments.length?(e=+_,U()):e},N.translate=function(_){return arguments.length?(i=+_[0],r=+_[1],U()):[i,r]},N.center=function(_){return arguments.length?(o=_[0]%360*S,s=_[1]%360*S,U()):[o*z,s*z]},N.rotate=function(_){return arguments.length?(a=_[0]%360*S,u=_[1]%360*S,c=_.length>2?_[2]%360*S:0,U()):[a*z,u*z,c*z]},N.angle=function(_){return arguments.length?(h=_%360*S,U()):h*z},N.reflectX=function(_){return arguments.length?(f=_?-1:1,U()):f<0},N.reflectY=function(_){return arguments.length?(p=_?-1:1,U()):p<0},N.precision=function(_){return arguments.length?(E=Jn(W,L=_*_),V()):gt(L)},N.fitExtent=function(_,I){return Vn(N,_,I)},N.fitSize=function(_,I){return function or(n,t,e){return Vn(n,[[0,0],t],e)}(N,_,I)},N.fitWidth=function(_,I){return function sr(n,t,e){return qe(n,function(i){var r=+t,o=r/(i[1][0]-i[0][0]),s=(r-o*(i[1][0]+i[0][0]))/2,a=-o*i[0][1];n.scale(150*o).translate([s,a])},e)}(N,_,I)},N.fitHeight=function(_,I){return function ar(n,t,e){return qe(n,function(i){var r=+t,o=r/(i[1][1]-i[0][1]),s=-o*i[0][0],a=(r-o*(i[1][1]+i[0][1]))/2;n.scale(150*o).translate([s,a])},e)}(N,_,I)},function(){return t=n.apply(this,arguments),N.invert=t.invert&&lt,U()}}(function(){return n})()}function tn(n,t){return[n,Jt(zi((R+t)/2))]}tn.invert=function(n,t){return[n,2*tt($t(t))-R]};var Se=B(7636);class vr extends Wi.Q{setupDefaultRules(){super.setupDefaultRules();const t=this._root.interfaceColors,e=this.rule.bind(this);e("MapChart").setAll({projection:function yr(n){var a,u,c,t=gr(n),e=t.center,i=t.scale,r=t.translate,o=t.clipExtent,s=null;function l(){var h=D*i(),f=t(function Vi(n){function t(e){return(e=n(e[0]*S,e[1]*S))[0]*=z,e[1]*=z,e}return n=Rn(n[0]*S,n[1]*S,n.length>2?n[2]*S:0),t.invert=function(e){return(e=n.invert(e[0]*S,e[1]*S))[0]*=z,e[1]*=z,e},t}(t.rotate()).invert([0,0]));return o(null==s?[[f[0]-h,f[1]-h],[f[0]+h,f[1]+h]]:n===tn?[[Math.max(f[0]-h,s),a],[Math.min(f[0]+h,u),c]]:[[s,Math.max(f[1]-h,a)],[u,Math.min(f[1]+h,c)]])}return t.scale=function(h){return arguments.length?(i(h),l()):i()},t.translate=function(h){return arguments.length?(r(h),l()):r()},t.center=function(h){return arguments.length?(e(h),l()):e()},t.clipExtent=function(h){return arguments.length?(null==h?s=a=u=c=null:(s=+h[0][0],a=+h[0][1],u=+h[1][0],c=+h[1][1]),l()):null==s?null:[[s,a],[u,c]]},l()}(tn).scale(961/O),panX:"translateX",panY:"translateY",pinchZoom:!0,zoomStep:2,zoomLevel:1,rotationX:0,rotationY:0,rotationZ:0,maxZoomLevel:32,minZoomLevel:1,wheelY:"zoom",wheelX:"none",animationEasing:Se.C0(Se.T7),wheelEasing:Se.C0(Se.T7),wheelDuration:0,wheelSensitivity:1,maxPanOut:.4,centerMapOnZoomOut:!0});{const i=e("MapLine");i.setAll({precision:.5,role:"figure"}),(0,Ve.v)(i,"stroke",t,"grid")}e("MapPolygonSeries").setAll({affectsBounds:!0}),e("MapPointSeries").setAll({affectsBounds:!1,clipFront:!1,clipBack:!0,autoScale:!1}),e("MapLineSeries").setAll({affectsBounds:!1});{const i=e("MapPolygon");i.setAll({precision:.5,isMeasured:!1,role:"figure",fillOpacity:1,position:"absolute",strokeWidth:.2,strokeOpacity:1}),(0,Ve.v)(i,"fill",t,"primaryButton"),(0,Ve.v)(i,"stroke",t,"background")}e("Button",["zoomcontrol"]).setAll({marginTop:1,marginBottom:1}),e("Graphics",["map","button","plus","icon"]).setAll({x:K.CI,y:K.CI,draw:i=>{i.moveTo(-4,0),i.lineTo(4,0),i.moveTo(0,-4),i.lineTo(0,4)}}),e("Graphics",["map","button","minus","icon"]).setAll({x:K.CI,y:K.CI,draw:i=>{i.moveTo(-4,0),i.lineTo(4,0)}}),e("GraticuleSeries").setAll({step:10}),e("ZoomControl").setAll({x:K.AQ,centerX:K.AQ,y:K.AQ,centerY:K.AQ,paddingRight:10,paddingBottom:10})}}var Un,Kn,rn,on,Qn=B(4806),_r=B(4381),en=new C,nn=new C,jt={point:J,lineStart:J,lineEnd:J,polygonStart:function(){jt.lineStart=Pr,jt.lineEnd=br},polygonEnd:function(){jt.lineStart=jt.lineEnd=jt.point=J,en.add(T(nn)),nn=new C},result:function(){var n=en/2;return en=new C,n}};function Pr(){jt.point=wr}function wr(n,t){jt.point=qn,Un=rn=n,Kn=on=t}function qn(n,t){nn.add(on*n-rn*t),rn=n,on=t}function br(){qn(Un,Kn)}const ti=jt;var ei,ni,Pt,wt,sn=0,an=0,Kt=0,De=0,xe=0,Zt=0,ln=0,un=0,qt=0,dt={point:Ot,lineStart:ii,lineEnd:ri,polygonStart:function(){dt.lineStart=xr,dt.lineEnd=Cr},polygonEnd:function(){dt.point=Ot,dt.lineStart=ii,dt.lineEnd=ri},result:function(){var n=qt?[ln/qt,un/qt]:Zt?[De/Zt,xe/Zt]:Kt?[sn/Kt,an/Kt]:[NaN,NaN];return sn=an=Kt=De=xe=Zt=ln=un=qt=0,n}};function Ot(n,t){sn+=n,an+=t,++Kt}function ii(){dt.point=Sr}function Sr(n,t){dt.point=Dr,Ot(Pt=n,wt=t)}function Dr(n,t){var e=n-Pt,i=t-wt,r=gt(e*e+i*i);De+=r*(Pt+n)/2,xe+=r*(wt+t)/2,Zt+=r,Ot(Pt=n,wt=t)}function ri(){dt.point=Ot}function xr(){dt.point=Mr}function Cr(){oi(ei,ni)}function Mr(n,t){dt.point=oi,Ot(ei=Pt=n,ni=wt=t)}function oi(n,t){var e=n-Pt,i=t-wt,r=gt(e*e+i*i);De+=r*(Pt+n)/2,xe+=r*(wt+t)/2,Zt+=r,ln+=(r=wt*n-Pt*t)*(Pt+n),un+=r*(wt+t),qt+=3*r,Ot(Pt=n,wt=t)}const si=dt;function ai(n){this._context=n}ai.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:this._context.moveTo(n,t),this._point=1;break;case 1:this._context.lineTo(n,t);break;default:this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,O)}},result:J};var hn,li,ui,te,ee,cn=new C,Ce={point:J,lineStart:function(){Ce.point=Lr},lineEnd:function(){hn&&ci(li,ui),Ce.point=J},polygonStart:function(){hn=!0},polygonEnd:function(){hn=null},result:function(){var n=+cn;return cn=new C,n}};function Lr(n,t){Ce.point=ci,li=te=n,ui=ee=t}function ci(n,t){cn.add(gt((te-=n)*te+(ee-=t)*ee)),te=n,ee=t}const hi=Ce;let fi,Me,pi,gi;class di{constructor(t){this._append=null==t?mi:function Er(n){const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);if(t>15)return mi;if(t!==fi){const e=10**t;fi=t,Me=function(r){let o=1;this._+=r[0];for(const s=r.length;o<s;++o)this._+=Math.round(arguments[o]*e)/e+r[o]}}return Me}(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(t,e){switch(this._point){case 0:this._append`M${t},${e}`,this._point=1;break;case 1:this._append`L${t},${e}`;break;default:if(this._append`M${t},${e}`,this._radius!==pi||this._append!==Me){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,pi=i,Me=this._append,gi=this._,this._=r}this._+=gi}}result(){const t=this._;return this._="",t.length?t:null}}function mi(n){let t=1;this._+=n[0];for(const e=n.length;t<e;++t)this._+=arguments[t]+n[t]}var ne,Le,Ee,je,Ne,Te,Oe,Re,fn,pn,gn,vi,_i,nt,it,rt,Nr=B(8230),yi=B(2650),Rt=B(5106),mt={sphere:J,point:dn,lineStart:Pi,lineEnd:wi,polygonStart:function(){mt.lineStart=Rr,mt.lineEnd=Ir},polygonEnd:function(){mt.lineStart=Pi,mt.lineEnd=wi}};function dn(n,t){n*=S;var e=x(t*=S);ie(e*x(n),e*M(n),M(t))}function ie(n,t,e){++ne,Ee+=(n-Ee)/ne,je+=(t-je)/ne,Ne+=(e-Ne)/ne}function Pi(){mt.point=Tr}function Tr(n,t){n*=S;var e=x(t*=S);nt=e*x(n),it=e*M(n),rt=M(t),mt.point=Or,ie(nt,it,rt)}function Or(n,t){n*=S;var e=x(t*=S),i=e*x(n),r=e*M(n),o=M(t),s=ot(gt((s=it*o-rt*r)*s+(s=rt*i-nt*o)*s+(s=nt*r-it*i)*s),nt*i+it*r+rt*o);Le+=s,Te+=s*(nt+(nt=i)),Oe+=s*(it+(it=r)),Re+=s*(rt+(rt=o)),ie(nt,it,rt)}function wi(){mt.point=dn}function Rr(){mt.point=zr}function Ir(){bi(vi,_i),mt.point=dn}function zr(n,t){vi=n,_i=t,n*=S,t*=S,mt.point=bi;var e=x(t);nt=e*x(n),it=e*M(n),rt=M(t),ie(nt,it,rt)}function bi(n,t){n*=S;var e=x(t*=S),i=e*x(n),r=e*M(n),o=M(t),s=it*o-rt*r,a=rt*i-nt*o,u=nt*r-it*i,c=Gt(s,a,u),l=Et(c),h=c&&-l/c;fn.add(h*s),pn.add(h*a),gn.add(h*u),Le+=l,Te+=l*(nt+(nt=i)),Oe+=l*(it+(it=r)),Re+=l*(rt+(rt=o)),ie(nt,it,rt)}var Si,Di,mn,yn,vn,Ie=new C,ze=new C,bt={point:J,lineStart:J,lineEnd:J,polygonStart:function(){Ie=new C,bt.lineStart=Xr,bt.lineEnd=Yr},polygonEnd:function(){var n=+Ie;ze.add(n<0?O+n:n),this.lineStart=this.lineEnd=this.point=J},sphere:function(){ze.add(O)}};function Xr(){bt.point=Br}function Yr(){xi(Si,Di)}function Br(n,t){bt.point=xi,Si=n,Di=t,mn=n*=S,yn=x(t=(t*=S)/2+Z),vn=M(t)}function xi(n,t){var e=(n*=S)-mn,i=e>=0?1:-1,r=i*e,o=x(t=(t*=S)/2+Z),s=M(t),a=vn*s,u=yn*o+a*x(r),c=a*i*M(r);Ie.add(ot(c,u)),mn=n,yn=o,vn=s}var H,at,Q,ht,It,Ci,Mi,Ft,re,Nt,Dt,xt={point:_n,lineStart:Ei,lineEnd:ji,polygonStart:function(){xt.point=Ni,xt.lineStart=kr,xt.lineEnd=Zr,re=new C,bt.polygonStart()},polygonEnd:function(){bt.polygonEnd(),xt.point=_n,xt.lineStart=Ei,xt.lineEnd=ji,Ie<0?(H=-(Q=180),at=-(ht=90)):re>w?ht=90:re<-w&&(at=-90),Dt[0]=H,Dt[1]=Q},sphere:function(){H=-(Q=180),at=-(ht=90)}};function _n(n,t){Nt.push(Dt=[H=n,Q=n]),t<at&&(at=t),t>ht&&(ht=t)}function Li(n,t){var e=Tt([n*S,t*S]);if(Ft){var i=At(Ft,e),o=At([i[1],-i[0],0],i);ye(o),o=ge(o);var c,s=n-It,a=s>0?1:-1,u=o[0]*z*a,l=T(s)>180;l^(a*It<u&&u<a*n)?(c=o[1]*z)>ht&&(ht=c):l^(a*It<(u=(u+360)%360-180)&&u<a*n)?(c=-o[1]*z)<at&&(at=c):(t<at&&(at=t),t>ht&&(ht=t)),l?n<It?ft(H,n)>ft(H,Q)&&(Q=n):ft(n,Q)>ft(H,Q)&&(H=n):Q>=H?(n<H&&(H=n),n>Q&&(Q=n)):n>It?ft(H,n)>ft(H,Q)&&(Q=n):ft(n,Q)>ft(H,Q)&&(H=n)}else Nt.push(Dt=[H=n,Q=n]);t<at&&(at=t),t>ht&&(ht=t),Ft=e,It=n}function Ei(){xt.point=Li}function ji(){Dt[0]=H,Dt[1]=Q,xt.point=_n,Ft=null}function Ni(n,t){if(Ft){var e=n-It;re.add(T(e)>180?e+(e>0?360:-360):e)}else Ci=n,Mi=t;bt.point(n,t),Li(n,t)}function kr(){bt.lineStart()}function Zr(){Ni(Ci,Mi),bt.lineEnd(),T(re)>w&&(H=-(Q=180)),Dt[0]=H,Dt[1]=Q,Ft=null}function ft(n,t){return(t-=n)<0?t+360:t}function Fr(n,t){return n[0]-t[0]}function Ti(n,t){return n[0]<=n[1]?n[0]<=t&&t<=n[1]:t<n[0]||n[1]<t}function Pn(n){const t=function Gr(n){ne=Le=Ee=je=Ne=Te=Oe=Re=0,fn=new C,pn=new C,gn=new C,_t(n,mt);var t=+fn,e=+pn,i=+gn,r=Gt(t,e,i);return r<F&&(t=Te,e=Oe,i=Re,Le<w&&(t=Ee,e=je,i=Ne),(r=Gt(t,e,i))<F)?[NaN,NaN]:[ot(e,t)*z,Et(i/r)*z]}(n);return{longitude:t[0],latitude:t[1]}}function wn(n){const t=function Wr(n){var t,e,i,r,o,s,a;if(ht=Q=-(H=at=1/0),Nt=[],_t(n,xt),e=Nt.length){for(Nt.sort(Fr),t=1,o=[i=Nt[0]];t<e;++t)Ti(i,(r=Nt[t])[0])||Ti(i,r[1])?(ft(i[0],r[1])>ft(i[0],i[1])&&(i[1]=r[1]),ft(r[0],i[1])>ft(i[0],i[1])&&(i[0]=r[0])):o.push(i=r);for(s=-1/0,t=0,i=o[e=o.length-1];t<=e;i=r,++t)(a=ft(i[1],(r=o[t])[0]))>s&&(s=a,H=r[0],Q=i[1])}return Nt=Dt=null,H===1/0||at===1/0?[[NaN,NaN],[NaN,NaN]]:[[H,at],[Q,ht]]}(n);if(t){const e={left:t[0][0],right:t[1][0],top:t[1][1],bottom:t[0][1]};return e.right<e.left&&(e.right=180,e.left=-180),e}return{left:0,right:0,top:0,bottom:0}}var Sn=B(7166);class Ge extends Qn.j{constructor(){super(...arguments),Object.defineProperty(this,"_downTranslateX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downTranslateY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downRotationX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downRotationY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downRotationZ",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pLat",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_pLon",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_movePoints",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_downZoomLevel",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_doubleDownDistance",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_dirtyGeometries",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_geometryColection",{enumerable:!0,configurable:!0,writable:!0,value:{type:"GeometryCollection",geometries:[]}}),Object.defineProperty(this,"_centerLocation",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_za",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rxa",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rya",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_txa",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tya",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_mapBounds",{enumerable:!0,configurable:!0,writable:!0,value:[[0,0],[0,0]]}),Object.defineProperty(this,"_geoCentroid",{enumerable:!0,configurable:!0,writable:!0,value:{longitude:0,latitude:0}}),Object.defineProperty(this,"_geoBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_prevGeoBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_dispatchBounds",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_wheelDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_ph",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_mapFitted",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_centerX",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_centerY",{enumerable:!0,configurable:!0,writable:!0,value:0})}_makeGeoPath(){const t=this.get("projection"),e=function jr(n,t){let r,o,e=3,i=4.5;function s(a){return a&&("function"==typeof i&&o.pointRadius(+i.apply(this,arguments)),_t(a,r(o))),o.result()}return s.area=function(a){return _t(a,r(ti)),ti.result()},s.measure=function(a){return _t(a,r(hi)),hi.result()},s.bounds=function(a){return _t(a,r(be)),be.result()},s.centroid=function(a){return _t(a,r(si)),si.result()},s.projection=function(a){return arguments.length?(r=null==a?(n=null,Ue):(n=a).stream,s):n},s.context=function(a){return arguments.length?(o=null==a?(t=null,new di(e)):new ai(t=a),"function"!=typeof i&&o.pointRadius(i),s):t},s.pointRadius=function(a){return arguments.length?(i="function"==typeof a?a:(o.pointRadius(+a),+a),s):i},s.digits=function(a){if(!arguments.length)return e;if(null==a)e=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);e=u}return null===t&&(o=new di(e)),s},s.projection(n).digits(e).context(t)}();e.projection(t),this.setPrivateRaw("geoPath",e)}geoPoint(){return this.invert(this.seriesContainer.toGlobal({x:this.width()/2,y:this.height()/2}))}geoCentroid(){return this._geoCentroid}geoBounds(){return this._geoBounds}_handleSetWheel(){const t=this.get("wheelX"),e=this.get("wheelY"),i=this.chartContainer;"none"!=t||"none"!=e?(this._wheelDp&&this._wheelDp.dispose(),this._wheelDp=i.events.on("wheel",r=>{const o=this.get("wheelEasing"),s=this.get("wheelSensitivity",1),a=this.get("wheelDuration",0),u=r.originalEvent;if(!Sn.sp(u,this))return;u.preventDefault();const l=this.chartContainer._display.toLocal(r.point);"zoom"==e?this._handleWheelZoom(u.deltaY,l):"rotateY"==e?this._handleWheelRotateY(u.deltaY/5*s,a,o):"rotateX"==e&&this._handleWheelRotateX(u.deltaY/5*s,a,o),"zoom"==t?this._handleWheelZoom(u.deltaX,l):"rotateY"==t?this._handleWheelRotateY(u.deltaX/5*s,a,o):"rotateX"==t&&this._handleWheelRotateX(u.deltaX/5*s,a,o)}),this._disposers.push(this._wheelDp)):this._wheelDp&&this._wheelDp.dispose()}_prepareChildren(){super._prepareChildren();const t=this.get("projection"),e=this.innerWidth(),i=this.innerHeight();if(this.isDirty("projection")){this._makeGeoPath(),this.markDirtyProjection(),this._fitMap(),t.scale(this.getPrivate("mapScale")*this.get("zoomLevel",1)),t.rotate&&t.rotate([this.get("rotationX",0),this.get("rotationY",0),this.get("rotationZ",0)]);let o=this._prevSettings.projection;if(o&&o!=t){let s=e/2,a=i/2;if(o.invert){let u=o.invert([s,a]);if(u){let c=t(u);if(c){let l=t.translate(),h=s-(c[0]-l[0]),f=a-(c[1]-l[1]);t.translate([h,f]),this.setRaw("translateX",h),this.setRaw("translateY",f)}}}}}(this.isDirty("wheelX")||this.isDirty("wheelY"))&&this._handleSetWheel();var r=this._geometryColection.geometries;if(this._dirtyGeometries&&(this._geometryColection.geometries=[],this.series.each(o=>{A.wd(this._geometryColection.geometries,o._geometries)}),this._fitMap()),0!=r.length&&(e!=this._pw||i!=this._ph||this._dirtyGeometries)&&e>0&&i>0){let o=e/2,s=i/2;t.fitSize([e,i],this._geometryColection);const a=t.scale();if(this.setPrivateRaw("mapScale",a),t.scale(a*this.get("zoomLevel",1)),this._centerLocation){let c=t(this._centerLocation);if(c){let l=t.translate(),h=o-(c[0]-l[0]),f=s-(c[1]-l[1]);t.translate([h,f]),this.setRaw("translateX",h),this.setRaw("translateY",f),this._centerX=l[0],this._centerY=l[1]}}this.markDirtyProjection();const u=this.getPrivate("geoPath");this._mapBounds=u.bounds(this._geometryColection)}if(this._pw=e,this._ph=i,this.isDirty("zoomControl")){const o=this._prevSettings.zoomControl,s=this.get("zoomControl");s!==o&&(this._disposeProperty("zoomControl"),o&&o.dispose(),s&&(s.setPrivate("chart",this),this.children.push(s)),this.setRaw("zoomControl",s))}this.isDirty("zoomLevel")&&(t.scale(this.getPrivate("mapScale")*this.get("zoomLevel",1)),this.markDirtyProjection(),this.series.each(o=>{o.isType("MapPointSeries")&&o.get("autoScale")&&A.S6(o.dataItems,s=>{const a=s.bullets;a&&A.S6(a,u=>{const c=u.get("sprite");c&&c.set("scale",this.get("zoomLevel"))})})})),(this.isDirty("translateX")||this.isDirty("translateY"))&&(t.translate([this.get("translateX",this.width()/2),this.get("translateY",this.height()/2)]),this.markDirtyProjection()),t.rotate&&(this.isDirty("rotationX")||this.isDirty("rotationY")||this.isDirty("rotationZ"))&&(t.rotate([this.get("rotationX",0),this.get("rotationY",0),this.get("rotationZ",0)]),this.markDirtyProjection()),(this.isDirty("pinchZoom")||this.get("panX")||this.get("panY"))&&this._setUpTouch()}_fitMap(){const t=this.get("projection");let e=this.innerWidth(),i=this.innerHeight();if(e>0&&i>0){t.fitSize([e,i],this._geometryColection),this.setPrivateRaw("mapScale",t.scale());const r=t.translate();this.setRaw("translateX",r[0]),this.setRaw("translateY",r[1]),this._centerX=r[0],this._centerY=r[1];const o=this.getPrivate("geoPath");this._mapBounds=o.bounds(this._geometryColection),this._geoCentroid=Pn(this._geometryColection);const s=wn(this._geometryColection);if(this._geoBounds=s,this._geometryColection.geometries.length>0){s.left=Rt.NM(this._geoBounds.left,3),s.right=Rt.NM(this._geoBounds.right,3),s.top=Rt.NM(this._geoBounds.top,3),s.bottom=Rt.NM(this._geoBounds.bottom,3);const a=this._prevGeoBounds;a&&!Sn.lM(s,a)&&(this._dispatchBounds=!0,this._prevGeoBounds=s)}this._mapFitted=!0}}homeGeoPoint(){let t=this.get("homeGeoPoint");if(!t){const i=this.getPrivate("geoPath").bounds(this._geometryColection),r=i[0][0],o=i[0][1];t=this.invert({x:r+(i[1][0]-r)/2,y:o+(i[1][1]-o)/2})}return t}goHome(t){this.zoomToGeoPoint(this.homeGeoPoint(),this.get("homeZoomLevel",1),!0,t)}_updateChildren(){const t=this.get("projection");if(t.invert){let e=this.innerWidth(),i=this.innerHeight();e>0&&i>0&&(this._centerLocation=t.invert([this.innerWidth()/2,this.innerHeight()/2]))}super._updateChildren()}_afterChanged(){if(super._afterChanged(),this._dispatchBounds){this._dispatchBounds=!1;const t="geoboundschanged";this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this})}}_setUpTouch(){this.chartContainer._display.cancelTouch||(this.chartContainer._display.cancelTouch=!!(this.get("pinchZoom")||this.get("panX")||this.get("panY")))}markDirtyGeometries(){this._dirtyGeometries=!0,this.markDirty()}markDirtyProjection(){this.series.each(t=>{t.markDirtyProjection()})}_afterNew(){this._defaultThemes.push(vr.new(this._root)),this._settings.themeTags=Sn.Fy(this._settings.themeTags,["map"]),this.children.push(this.bulletsContainer),super._afterNew(),this._makeGeoPath(),this.chartContainer.children.push(this.seriesContainer),null==this.get("translateX")&&this.set("translateX",this.width()/2),null==this.get("translateY")&&this.set("translateY",this.height()/2),this.chartContainer.set("interactive",!0),this.chartContainer.set("interactiveChildren",!1),this.chartContainer.set("background",_r.A.new(this._root,{themeTags:["map","background"],fill:Nr.Il.fromHex(0),fillOpacity:0})),this._disposers.push(this.chartContainer.events.on("pointerdown",e=>{this._handleChartDown(e)})),this._disposers.push(this.chartContainer.events.on("globalpointerup",e=>{this._handleChartUp(e)})),this._disposers.push(this.chartContainer.events.on("globalpointermove",e=>{this._handleChartMove(e)}));let t=!1;for(let e=0;e<yi.i_.licenses.length;e++)yi.i_.licenses[e].match(/^AM5M.{5,}/i)&&(t=!0);t||this._root._showBranding(),this._setUpTouch()}_handleChartDown(t){this._downZoomLevel=this.get("zoomLevel",1);let e=yt.XP(this.chartContainer._downPoints).length;if(1==e){const i=this.chartContainer._downPoints[1];i&&i.x==t.point.x&&i.y==t.point.y&&(e=0)}if(e>0){this._downTranslateX=this.get("translateX"),this._downTranslateY=this.get("translateY"),this._downRotationX=this.get("rotationX"),this._downRotationY=this.get("rotationY"),this._downRotationZ=this.get("rotationZ");const i=this.chartContainer._getDownPointId();if(i){let r=this._movePoints[i];r&&(this.chartContainer._downPoints[i]=r)}}else if(0==e){let i=this.chartContainer.get("background");if(i&&i.events.enableType("click"),this.get("panX")||this.get("panY")){this._za&&this._za.stop(),this._txa&&this._txa.stop(),this._tya&&this._tya.stop(),this._rxa&&this._rxa.stop(),this._rya&&this._rya.stop();const r=this.chartContainer._display.toLocal(t.point);this._downTranslateX=this.get("translateX"),this._downTranslateY=this.get("translateY"),this._downRotationX=this.get("rotationX"),this._downRotationY=this.get("rotationY"),this._downRotationZ=this.get("rotationZ");let o=this.get("projection");if(o.invert){let s=o.invert([r.x,r.y]),a=o.invert([r.x+1,r.y+1]);s&&a&&(this._pLon=Math.abs(a[0]-s[0]),this._pLat=Math.abs(a[1]-s[1]))}}}}invert(t){let e=this.get("projection");if(e.invert){const i=e.invert([t.x,t.y]);if(i)return{longitude:i[0],latitude:i[1]}}return{longitude:0,latitude:0}}convert(t,e,i){let o,r=this.get("projection");if(null!=e||null!=i){null==e&&(e=0),null==i&&(i=0);let s=r.rotate();r.rotate([e,i,0]),o=r([t.longitude,t.latitude]),r.rotate(s)}else o=r([t.longitude,t.latitude]);return o?{x:o[0],y:o[1]}:{x:0,y:0}}_handleChartUp(t){this.chartContainer._downPoints={}}_handlePinch(){const t=this.chartContainer;let e=0,i=[],r=[];if(yt.S6(t._downPoints,(o,s)=>{i[e]=s;let a=this._movePoints[o];a&&(r[e]=a),e++}),i.length>1&&r.length>1){const o=t._display;let s=i[0],a=i[1],u=r[0],c=r[1];if(s&&a&&u&&c){s=o.toLocal(s),a=o.toLocal(a),u=o.toLocal(u),c=o.toLocal(c);let l=Math.hypot(a.x-s.x,a.y-s.y),f=Math.hypot(c.x-u.x,c.y-u.y)/l*this._downZoomLevel;f=Rt.C7(f,this.get("minZoomLevel",1),this.get("maxZoomLevel",32));let p={x:u.x+(c.x-u.x)/2,y:u.y+(c.y-u.y)/2},g={x:s.x+(a.x-s.x)/2,y:s.y+(a.y-s.y)/2},v=this._downZoomLevel,P=p.x-(-(this._downTranslateX||0)+g.x)/v*f,d=p.y-(-(this._downTranslateY||0)+g.y)/v*f;this.set("zoomLevel",f),this.set("translateX",P),this.set("translateY",d)}}}_handleChartMove(t){const e=this.chartContainer;let i=e._getDownPoint();const r=e._getDownPointId(),s=t.originalEvent.pointerId;if(this.get("pinchZoom")&&s&&(this._movePoints[s]=t.point,yt.XP(e._downPoints).length>1))this._handlePinch();else if((!r||!s||s==r)&&i){const a=this.get("panX"),u=this.get("panY");if("none"!=a||"none"!=u){const c=e._display;let l=c.toLocal(t.point);i=c.toLocal(i);let h=this._downTranslateX,f=this._downTranslateY;if(Math.hypot(i.x-l.x,i.y-l.y)>5){let p=e.get("background");if(p&&p.events.disableType("click"),k.hj(h)&&k.hj(f)){let g=this.get("projection");const y=this.get("zoomLevel",1),m=this.get("maxPanOut",.4),v=this._mapBounds,P=this.width(),d=this.height(),b=v[1][0]-v[0][0],L=v[1][1]-v[0][1];if("translateX"==a){h+=l.x-i.x;const E=P/2-(P/2-this._centerX)*y;h=Math.min(h,E+b*m*y),h=Math.max(h,E-b*m*y)}if("translateY"==u){f+=l.y-i.y;const E=d/2-(d/2-this._centerY)*y;f=Math.min(f,E+L*m*y),f=Math.max(f,E-L*m*y)}if(this.set("translateX",h),this.set("translateY",f),g.invert){let E=g.invert([i.x,i.y]);location&&E&&("rotateX"==a&&this.set("rotationX",this._downRotationX-(i.x-l.x)*this._pLon),"rotateY"==u&&this.set("rotationY",this._downRotationY+(i.y-l.y)*this._pLat))}}}}}}_handleWheelRotateY(t,e,i){this._rya=this.animate({key:"rotationY",to:this.get("rotationY",0)-t,duration:e,easing:i})}_handleWheelRotateX(t,e,i){this._rxa=this.animate({key:"rotationX",to:this.get("rotationX",0)-t,duration:e,easing:i})}_handleWheelZoom(t,e){let i=this.get("zoomStep",2),r=this.get("zoomLevel",1),o=r;t>0?o=r/i:t<0&&(o=r*i),o!=r&&this.zoomToPoint(e,o)}zoomToGeoBounds(t,e,i,r){t.right<t.left&&(t.right=180,t.left=-180);const s=this.getPrivate("geoPath").bounds(this._geometryColection);let a=this.convert({longitude:t.left,latitude:t.top},i,r),u=this.convert({longitude:t.right,latitude:t.bottom},i,r);a.y<s[0][1]&&(a.y=s[0][1]),u.y>s[1][1]&&(u.y=s[1][1]);let c=this.get("zoomLevel",1),l_left=a.x,l_right=u.x,l_top=a.y,l_bottom=u.y,h=this.seriesContainer,f=.9*Math.min(h.innerWidth()/(l_right-l_left)*c,h.innerHeight()/(l_bottom-l_top)*c),y=this.invert({x:l_left+(l_right-l_left)/2,y:l_top+(l_bottom-l_top)/2});return(null!=i||null!=r)&&this.rotate(i,r),this.zoomToGeoPoint(y,f,!0,e)}zoomToPoint(t,e,i,r){e&&(e=Rt.C7(e,this.get("minZoomLevel",1),this.get("maxZoomLevel",32))),k.hj(r)||(r=this.get("animationDuration",0));const o=this.get("animationEasing"),s=this.get("zoomLevel",1);this.get("centerMapOnZoomOut")&&e==this.get("homeZoomLevel",1)&&(t=this.convert(this.homeGeoPoint()),i=!0);let a=t.x,u=t.y,c=this.get("translateX",0),l=this.get("translateY",0),h=a,f=u;i&&(h=this.width()/2,f=this.height()/2);let g=f-(u-l)/s*e;return this._txa=this.animate({key:"translateX",to:h-(a-c)/s*e,duration:r,easing:o}),this._tya=this.animate({key:"translateY",to:g,duration:r,easing:o}),this._za=this.animate({key:"zoomLevel",to:e,duration:r,easing:o}),s!=e&&this._root.readerAlert(this._t("Zoom level changed to %1",this._root.locale,k.D$(e))),this._za}zoomToGeoPoint(t,e,i,r,o,s){let a=this.convert(t,o,s);if((null!=o||null!=s)&&this.rotate(o,s),a)return this.zoomToPoint(a,e,i,r)}rotate(t,e,i){k.hj(i)||(i=this.get("animationDuration",0));const r=this.get("animationEasing");null!=t&&this.animate({key:"rotationX",to:t,duration:i,easing:r}),null!=e&&this.animate({key:"rotationY",to:e,duration:i,easing:r})}zoomIn(){return this.zoomToPoint({x:this.width()/2,y:this.height()/2},this.get("zoomLevel",1)*this.get("zoomStep",2))}zoomOut(){return this.zoomToPoint({x:this.width()/2,y:this.height()/2},this.get("zoomLevel",1)/this.get("zoomStep",2))}_clearDirty(){super._clearDirty(),this._dirtyGeometries=!1,this._mapFitted=!1}getArea(t){const e=this.getPrivate("geoPath"),i=t.get("geometry");return i?e.area(i):0}}Object.defineProperty(Ge,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapChart"}),Object.defineProperty(Ge,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Qn.j.classNames.concat([Ge.className])});class Xe extends j{constructor(){super(...arguments),Object.defineProperty(this,"_types",{enumerable:!0,configurable:!0,writable:!0,value:["Point","MultiPoint"]}),Object.defineProperty(this,"_lineChangedDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){this.fields.push("polygonId","lineId","longitude","latitude","fixed"),super._afterNew()}markDirtyProjection(){this.markDirty()}markDirtyValues(t){super.markDirtyValues(),t&&this._positionBullets(t)}processDataItem(t){super.processDataItem(t);let e=t.get("geometry");if(e){if("Point"==e.type){const i=e.coordinates;i&&(t.set("longitude",i[0]),t.set("latitude",i[1]))}else if("MultiPoint"==e.type){const i=e.coordinates;i&&i[0]&&(t.set("longitude",i[0][0]),t.set("latitude",i[0][1]))}}else e={type:"Point",coordinates:[t.get("longitude",0),t.get("latitude",0)]},t.set("geometry",e);this._addGeometry(e,this)}_makeBullets(t){t.bullets=[],this.bullets.each(e=>{const i=t.get("geometry");if(i)if("Point"==i.type)this._setBulletParent(this._makeBullet(t,e));else if(i.type="MultiPoint"){let r=0;A.S6(i.coordinates,()=>{this._setBulletParent(this._makeBullet(t,e,r)),r++})}})}_setBulletParent(t){if(t){const e=t.get("sprite"),i=this.chart;if(e&&i){const r=e.dataItem;r&&(r.get("fixed")?e.parent!=i.bulletsContainer&&i.bulletsContainer.children.moveValue(e):e.parent!=this.bulletsContainer&&this.bulletsContainer.children.moveValue(e))}}}_positionBullet(t){const e=t.get("sprite");if(e){const i=e.dataItem;if(i&&i.get("fixed"))return;const r=i.get("latitude"),o=i.get("longitude"),s=i.get("lineDataItem"),a=i.get("fixed"),u=this.chart;let c;if(s)c=s.get("mapLine");else{const y=i.get("lineId");y&&u&&u.series.each(m=>{if(m.isType("MapLineSeries")){let v=m.getDataItemById(y);v&&(i.set("lineDataItem",v),c=v.get("mapLine"))}})}this._lineChangedDp&&this._lineChangedDp.dispose(),c&&(this._lineChangedDp=c.events.on("linechanged",()=>{this._positionBullets(i)}));const l=i.get("polygonDataItem");let h;if(l)h=l.get("mapPolygon");else{const y=i.get("polygonId");y&&u&&u.series.each(m=>{if(m.isType("MapPolygonSeries")){let v=m.getDataItemById(y);v&&(i.set("polygonDataItem",v),h=v.get("mapPolygon"))}})}const f=i.get("positionOnLine");let p,g;if(h){let y=h.visualCentroid();p=[y.longitude,y.latitude],i.setRaw("longitude",y.longitude),i.setRaw("latitude",y.latitude)}else if(c&&k.hj(f)){let y=c.positionToGeoPoint(f);if(p=[y.longitude,y.latitude],i.get("autoRotate",t.get("autoRotate"))&&u){const m=c.positionToGeoPoint(f-.002),v=c.positionToGeoPoint(f+.002),P=u.convert(m),d=u.convert(v);g=Rt._O(P,d)}i.setRaw("longitude",y.longitude),i.setRaw("latitude",y.latitude)}else if(k.hj(o)&&k.hj(r))p=[o,r];else{const y=i.get("geometry");y&&("Point"==y.type?this._positionBulletReal(t,y,y.coordinates,g):"MultiPoint"==y.type&&(p=y.coordinates[t._index||0]))}!a&&p&&this._positionBulletReal(t,{type:"Point",coordinates:p},p,g)}}_positionBulletReal(t,e,i,r){const o=t.get("sprite"),s=this.chart;if(s){const a=s.get("projection"),u=s.getPrivate("geoPath"),c=o.dataItem,l=a(i);l&&o.setAll({x:l[0],y:l[1]});let h=!0;u(e)?this.get("clipFront")&&(h=!1):this.get("clipBack")&&(h=!1),o.setPrivate("visible",h),c&&null!=r&&c.get("autoRotate",t.get("autoRotate"))&&o.set("rotation",r+c.get("autoRotateAngle",t.get("autoRotateAngle",0)))}}zoomToDataItem(t,e,i){const r=this.chart;if(r){const o=t.get("longitude",0),s=t.get("latitude",0);return i?r.zoomToGeoPoint({longitude:o,latitude:s},e,!0,void 0,-o,-s):r.zoomToGeoPoint({longitude:o,latitude:s},e,!0)}}disposeDataItem(t){const e=this.chart;e&&e.series.each(i=>{i.isType("MapLineSeries")&&A.S6(i.dataItems,r=>{const o=r.get("pointsToConnect");o&&A.S6(o,s=>{s==t&&(A.Od(o,s),i.markDirtyValues(r))})})}),super.disposeDataItem(t)}_excludeDataItem(t){super._excludeDataItem(t);const e=t.bullets;e&&A.S6(e,i=>{const r=i.get("sprite");r&&r.setPrivate("visible",!1)})}_unexcludeDataItem(t){super._unexcludeDataItem(t);const e=t.bullets;e&&A.S6(e,i=>{const r=i.get("sprite");r&&r.setPrivate("visible",!0)})}_notIncludeDataItem(t){super._notIncludeDataItem(t);const e=t.bullets;e&&A.S6(e,i=>{const r=i.get("sprite");r&&r.setPrivate("visible",!1)})}_unNotIncludeDataItem(t){super._unNotIncludeDataItem(t);const e=t.bullets;e&&A.S6(e,i=>{const r=i.get("sprite");r&&r.setPrivate("visible",!0)})}}Object.defineProperty(Xe,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapPointSeries"}),Object.defineProperty(Xe,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:j.classNames.concat([Xe.className])});var Vr=B(7234),$r=B.n(Vr);class oe extends ct.T{constructor(){super(...arguments),Object.defineProperty(this,"_projectionDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"series",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_beforeChanged(){if(super._beforeChanged(),this._projectionDirty||this.isDirty("geometry")||this.isDirty("precision")){const t=this.get("geometry");if(t){const e=this.series;if(e){const i=e.projection();i&&i.precision(this.get("precision",.5));const r=e.geoPath();r&&(this._clear=!0,this.set("draw",o=>{r.context(this._display),r(t),r.context(null)}),this.isHover()&&this.showTooltip())}}}}markDirtyProjection(){this.markDirty(),this._projectionDirty=!0}_clearDirty(){super._clearDirty(),this._projectionDirty=!1}geoCentroid(){const t=this.get("geometry");return t?Pn(t):{latitude:0,longitude:0}}visualCentroid(){let t=0,e=[];const i=this.get("geometry");if(i){if("Polygon"==i.type)e=i.coordinates;else if("MultiPolygon"==i.type)for(let o=0;o<i.coordinates.length;o++){let s=i.coordinates[o],a=(n={type:"Polygon",coordinates:s},ze=new C,_t(n,bt),2*ze);a>t&&(e=s,t=a)}let r=$r()(e);return{longitude:r[0],latitude:r[1]}}var n;return{longitude:0,latitude:0}}_getTooltipPoint(){const t=this.series;if(t){const e=t.projection();if(e){const i=this.visualCentroid(),r=e([i.longitude,i.latitude]);if(r)return{x:r[0],y:r[1]}}}return{x:0,y:0}}}Object.defineProperty(oe,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapPolygon"}),Object.defineProperty(oe,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ct.T.classNames.concat([oe.className])});class Ye extends j{constructor(){super(...arguments),Object.defineProperty(this,"mapPolygons",{enumerable:!0,configurable:!0,writable:!0,value:new En.o(jn.YS.new({}),()=>oe._new(this._root,{},[this.mapPolygons.template]))}),Object.defineProperty(this,"_types",{enumerable:!0,configurable:!0,writable:!0,value:["Polygon","MultiPolygon"]})}makeMapPolygon(t){const e=this.children.push(this.mapPolygons.make());return e._setDataItem(t),this.mapPolygons.push(e),e}markDirtyProjection(){A.S6(this.dataItems,t=>{let e=t.get("mapPolygon");e&&e.markDirtyProjection()})}_prepareChildren(){super._prepareChildren(),this.isDirty("fill")&&this.mapPolygons.template.set("fill",this.get("fill")),this.isDirty("stroke")&&this.mapPolygons.template.set("stroke",this.get("stroke"))}processDataItem(t){super.processDataItem(t);let e=t.get("mapPolygon");e||(e=this.makeMapPolygon(t)),t.set("mapPolygon",e);let i=t.get("geometry");if(i){if(this.get("reverseGeodata")&&i.coordinates)for(let o=0;o<i.coordinates.length;o++)if("MultiPolygon"==i.type)for(let s=0;s<i.coordinates[o].length;s++)i.coordinates[o][s].reverse();else i.coordinates[o].reverse();e.set("geometry",i)}e.series=this,this._addGeometry(t.get("geometry"),this)}disposeDataItem(t){super.disposeDataItem(t);const e=t.get("mapPolygon");e&&(this.mapPolygons.removeValue(e),e.dispose()),this._removeGeometry(t.get("geometry"))}_excludeDataItem(t){super._excludeDataItem(t);const e=t.get("mapPolygon");e&&e.setPrivate("visible",!1)}_unexcludeDataItem(t){super._unexcludeDataItem(t);const e=t.get("mapPolygon");e&&e.setPrivate("visible",!0)}_notIncludeDataItem(t){super._notIncludeDataItem(t);const e=t.get("mapPolygon");e&&e.setPrivate("visible",!1)}_unNotIncludeDataItem(t){super._unNotIncludeDataItem(t);const e=t.get("mapPolygon");e&&e.setPrivate("visible",!0)}markDirtyValues(t){if(super.markDirtyValues(),t){const e=t.get("mapPolygon");e&&e.set("geometry",t.get("geometry"))}}zoomToDataItem(t,e){const i=t.get("mapPolygon");if(i){const r=i.get("geometry"),o=this.chart;if(r&&o){if(e){const s=Pn(r);return o.rotate(-s.longitude,-s.latitude),o.zoomToGeoBounds(wn(r),void 0,-s.longitude,-s.latitude)}return o.zoomToGeoBounds(wn(r))}}}}Object.defineProperty(Ye,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapPolygonSeries"}),Object.defineProperty(Ye,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:j.classNames.concat([Ye.className])});var Oi=B(7970),Ri=B(5854),Jr=B(2305);class Be extends Oi.W{constructor(){super(...arguments),Object.defineProperty(this,"plusButton",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(Ri.z.new(this._root,{width:36,height:36,themeTags:["plus"]}))}),Object.defineProperty(this,"minusButton",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(Ri.z.new(this._root,{width:36,height:36,themeTags:["minus"]}))}),Object.defineProperty(this,"_disposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNew(),this.set("position","absolute"),this.set("layout",this._root.verticalLayout),this.set("themeTags",["zoomcontrol"]),this.plusButton.setAll({icon:ct.T.new(this._root,{themeTags:["icon"]}),layout:void 0}),this.minusButton.setAll({icon:ct.T.new(this._root,{themeTags:["icon"]}),layout:void 0})}_prepareChildren(){if(super._prepareChildren(),this.isPrivateDirty("chart")){const t=this.getPrivate("chart"),e=this._prevPrivateSettings.chart;t&&(this._disposer=new Jr.FV([this.plusButton.events.on("click",()=>{t.zoomIn()}),this.minusButton.events.on("click",()=>{t.zoomOut()})])),e&&this._disposer&&this._disposer.dispose()}}}Object.defineProperty(Be,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ZoomControl"}),Object.defineProperty(Be,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Oi.W.classNames.concat([Be.className])})},7234:(ae,Vt,B)=>{var St=B(7253);function A(C,Y,q){Y=Y||1;for(var w,F,D,R,Z=0;Z<C[0].length;Z++){var O=C[0][Z];(!Z||O[0]<w)&&(w=O[0]),(!Z||O[1]<F)&&(F=O[1]),(!Z||O[0]>D)&&(D=O[0]),(!Z||O[1]>R)&&(R=O[1])}var z=D-w,S=R-F,T=Math.min(z,S),tt=T/2;if(0===T){var ot=[w,F];return ot.distance=0,ot}for(var x=new St(void 0,yt),Lt=w;Lt<D;Lt+=T)for(var $t=F;$t<R;$t+=T)x.push(new j(Lt+tt,$t+tt,tt,C));var vt=function K(C){for(var Y=0,q=0,w=0,F=C[0],D=0,R=F.length,Z=R-1;D<R;Z=D++){var O=F[D],z=F[Z],S=O[0]*z[1]-z[0]*O[1];q+=(O[0]+z[0])*S,w+=(O[1]+z[1])*S,Y+=3*S}return 0===Y?new j(F[0][0],F[0][1],0,C):new j(q/Y,w/Y,0,C)}(C),Gt=new j(w+z/2,F+S/2,0,C);Gt.d>vt.d&&(vt=Gt);for(var Jt=x.length;x.length;){var st=x.pop();st.d>vt.d&&(vt=st,q&&console.log("found best %d after %d probes",Math.round(1e4*st.d)/1e4,Jt)),!(st.max-vt.d<=Y)&&(x.push(new j(st.x-(tt=st.h/2),st.y-tt,tt,C)),x.push(new j(st.x+tt,st.y-tt,tt,C)),x.push(new j(st.x-tt,st.y+tt,tt,C)),x.push(new j(st.x+tt,st.y+tt,tt,C)),Jt+=4)}q&&(console.log("num probes: "+Jt),console.log("best distance: "+vt.d));var M=[vt.x,vt.y];return M.distance=vt.d,M}function yt(C,Y){return Y.max-C.max}function j(C,Y,q,w){this.x=C,this.y=Y,this.h=q,this.d=function k(C,Y,q){for(var w=!1,F=1/0,D=0;D<q.length;D++)for(var R=q[D],Z=0,O=R.length,z=O-1;Z<O;z=Z++){var S=R[Z],T=R[z];S[1]>Y!=T[1]>Y&&C<(T[0]-S[0])*(Y-S[1])/(T[1]-S[1])+S[0]&&(w=!w),F=Math.min(F,ct(C,Y,S,T))}return 0===F?0:(w?1:-1)*Math.sqrt(F)}(C,Y,w),this.max=this.d+this.h*Math.SQRT2}function ct(C,Y,q,w){var F=q[0],D=q[1],R=w[0]-F,Z=w[1]-D;if(0!==R||0!==Z){var O=((C-F)*R+(Y-D)*Z)/(R*R+Z*Z);O>1?(F=w[0],D=w[1]):O>0&&(F+=R*O,D+=Z*O)}return(R=C-F)*R+(Z=Y-D)*Z}St.default&&(St=St.default),ae.exports=A,ae.exports.default=A},7253:(ae,Vt,B)=>{B.r(Vt),B.d(Vt,{default:()=>St});class St{constructor(j=[],k=A){if(this.data=j,this.length=this.data.length,this.compare=k,this.length>0)for(let K=(this.length>>1)-1;K>=0;K--)this._down(K)}push(j){this.data.push(j),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const j=this.data[0],k=this.data.pop();return this.length--,this.length>0&&(this.data[0]=k,this._down(0)),j}peek(){return this.data[0]}_up(j){const{data:k,compare:K}=this,ct=k[j];for(;j>0;){const C=j-1>>1,Y=k[C];if(K(ct,Y)>=0)break;k[j]=Y,j=C}k[j]=ct}_down(j){const{data:k,compare:K}=this,ct=this.length>>1,C=k[j];for(;j<ct;){let Y=1+(j<<1),q=k[Y];const w=Y+1;if(w<this.length&&K(k[w],q)<0&&(Y=w,q=k[w]),K(q,C)>=0)break;k[j]=q,j=Y}k[j]=C}}function A(yt,j){return yt<j?-1:yt>j?1:0}}}]);