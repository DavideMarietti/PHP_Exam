(self.webpackChunkforum_proj=self.webpackChunkforum_proj||[]).push([[635],{8491:(Kt,Ut,g)=>{"use strict";g.d(Ut,{AccumulationDistribution:()=>d.G,AccumulativeSwingIndex:()=>f.X,Aroon:()=>h.W,AverageSeries:()=>yt,AwesomeOscillator:()=>O.S,BollingerBands:()=>Gt.r,CalloutSeries:()=>pt,ChaikinMoneyFlow:()=>v.P,ChaikinOscillator:()=>B.Y,ChartIndicator:()=>Qt.n,ColorControl:()=>Mt.t,CommodityChannelIndex:()=>N.z,ComparisonControl:()=>Ht,DateRangeSelector:()=>me.z,DisparityIndex:()=>z.M,DoodleSeries:()=>St,DrawingControl:()=>Rt,DrawingSeries:()=>H,DrawingToolControl:()=>Ot,Dropdown:()=>fe.L,DropdownColors:()=>pe.P,DropdownList:()=>te.s,DropdownListControl:()=>q.I,EllipseSeries:()=>Dt,FibonacciSeries:()=>ct,FibonacciTimezoneSeries:()=>At,HorizontalLineSeries:()=>Ct,HorizontalRaySeries:()=>Tt,IconControl:()=>Xt,IconSeries:()=>rt,Indicator:()=>Jt.z,IndicatorControl:()=>xe.W,IntervalControl:()=>Wt,LabelSeries:()=>lt,MACD:()=>P.C,MedianPrice:()=>ut.F,MovingAverage:()=>ot.n,MovingAverageDeviation:()=>Yt.e,MovingAverageEnvelope:()=>X.i,OnBalanceVolume:()=>M.m,PanelControls:()=>bt.G,PeriodSelector:()=>_e.t,PolylineSeries:()=>st,QuadrantLineSeries:()=>It,RectangleSeries:()=>_t,RegressionSeries:()=>wt,RelativeStrengthIndex:()=>L.x,ResetControl:()=>Ce.K,SeriesTypeControl:()=>zt,SettingsControl:()=>Pe.E,SettingsModal:()=>xt.T,SimpleLineSeries:()=>R,StandardDeviation:()=>J.d,StochasticOscillator:()=>S.m,StockChart:()=>Et.D,StockControl:()=>Q.L,StockLegend:()=>vt.Z,StockPanel:()=>Nt.s,StockToolbar:()=>ge._,TrendLineSeries:()=>kt,Trix:()=>Vt.t,TypicalPrice:()=>Ft.d,VWAP:()=>$t.y,VerticalLineSeries:()=>Pt,Volume:()=>V.f,WilliamsR:()=>E.a,ZigZag:()=>it.b});var Et=g(4254),vt=g(1608),Nt=g(9249),bt=g(1544),xt=g(1099),Jt=g(8674),Qt=g(3580),ot=g(919),$t=g(2670),X=g(221),Yt=g(1449),Gt=g(7604),L=g(9323),d=g(162),f=g(9637),h=g(4460),P=g(8181),v=g(5524),B=g(8336),M=g(2778),S=g(381),O=g(3937),E=g(2774),V=g(8556),N=g(2725),z=g(2501),J=g(2498),Ft=g(2826),Vt=g(8035),ut=g(7938),it=g(396),at=g(8919),mt=g(719),jt=g(9762),Zt=g(7970),G=g(5344),A=g(9660),qt=g(8154),nt=g(8256),Z=g(5106),U=g(533);class H extends at.e{constructor(){super(...arguments),Object.defineProperty(this,"_clickDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_moveDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_upDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_drawingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_clickPointerPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_movePointerPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isDrawing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isPointerDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_index",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_di",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_dragStartPX",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_dragStartY",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_dvpX",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dvY",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_isHover",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_erasingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){this.addTag("drawing"),this._tag&&this.addTag(this._tag),this.set("valueYField","valueY"),this.set("valueXField","valueX"),super._afterNew(),this.set("connect",!1),this.set("autoGapCount",1/0),this.set("ignoreMinMax",!0),this.set("groupDataDisabled",!0);const t=this.strokes.template;t.set("templateField","stroke");const e=this.fills.template;e.setAll({templateField:"fill"}),e.events.on("dragstart",i=>{this._handleFillDragStart(i,this._getIndex(i.target)),this._isPointerDown=!0}),e.events.on("pointerdown",i=>{const s=this._getIndex(i.target);this._erasingEnabled?this._disposeIndex(s):!i.originalEvent.button&&this._drawingEnabled&&this._handlePointerDown(i);const n=this.strokes.getIndex(this._getStrokeIndex(s));n&&n.dragStart(i)}),t.events.on("pointerdown",i=>{this._erasingEnabled?this._disposeIndex(this._getIndex(i.target)):!i.originalEvent.button&&this._drawingEnabled&&this._handlePointerDown(i)}),e.events.on("dragstop",i=>{this._isPointerDown=!1;const s=this._getIndex(i.target);this._handleFillDragStop(i,s);const n=this.strokes.getIndex(this._getStrokeIndex(s));n&&n.dragStop(i)}),e.events.on("pointerover",i=>{const s=this._getIndex(i.target),n=this.strokes.getIndex(this._getStrokeIndex(s));n&&n.hover(),this._isHover=!0,this._showSegmentBullets(s)}),e.events.on("pointerout",()=>{this._isHover=!1,this._hideAllBullets()}),t.events.on("pointerover",i=>{this._isHover=!0,this._showSegmentBullets(this._getIndex(i.target))}),t.events.on("pointerout",()=>{this._isHover=!1,this._hideAllBullets()}),t.events.on("dragstop",i=>{this._handleFillDragStop(i,this._getIndex(i.target))}),t.events.on("dragstart",i=>{this._handleFillDragStart(i,this._getIndex(i.target))}),this.bulletsContainer.states.create("hidden",{visible:!0,opacity:0}),this.bullets.push((i,s,n)=>{const r=this._di[n.dataContext.index].e;let l=this.get("strokeColor",this.get("stroke"));if(r){const u=r.dataContext;if(u){const b=u.stroke;b&&(l=b.get("stroke"))}}const c=Zt.W.new(this._root,{themeTags:["grip"],setStateOnChildren:!0,draggable:!0});return c.children.push(jt.C.new(this._root,{themeTags:["outline"],stroke:l})),c.children.push(jt.C.new(this._root,{stroke:l})),c.events.on("pointerover",u=>{const b=u.target.dataItem;b&&this._showSegmentBullets(b.dataContext.index)}),c.events.on("pointerout",()=>{this._hideAllBullets()}),this._addBulletInteraction(c),this._tweakBullet(c,n),mt.g.new(this._root,{locationX:void 0,sprite:c})}),this.events.on("pointerover",()=>{this._handlePointerOver()}),this.events.on("pointerout",()=>{this._handlePointerOut()})}_disposeIndex(t){const e=this._di[t];e&&U.S6(e,(i,s)=>{this.data.removeValue(s.dataContext)})}_afterDataChange(){A.S6(this.dataItems,t=>{const e=t.dataContext,i=e.index,s=e.corner;null!=i&&(null==this._di[i]&&(this._di[i]={}),this._createElements(i,t),this._di[i][s]=t,this._index=i)})}_createElements(t,e){}clearDrawings(){A.S6(this._di,(t,e)=>{this._disposeIndex(e)}),this.data.setAll([]),this._index=0}_getIndex(t){const e=t.get("userData");if(e&&e.length>0){const i=this.dataItems[e[0]];if(i){const s=i.dataContext;if(s)return s.index}}return 0}_getStrokeIndex(t){let e=0,i=t;return this.strokes.each(s=>{this._getIndex(s)==t&&(i=e),e++}),i}_showSegmentBullets(t){const e=this._di[t];e&&U.S6(e,(i,s)=>{const n=s.bullets;n&&A.S6(n,o=>{const a=o.get("sprite");a&&a.show()})})}_hideAllBullets(){this.strokes.each(t=>{t.unhover()}),this._drawingEnabled||this._isDragging||A.S6(this.dataItems,e=>{const i=e.bullets;i&&A.S6(i,s=>{const n=s.get("sprite");n&&n.hide()})})}showAllBullets(){A.S6(this.dataItems,t=>{const e=t.bullets;e&&A.S6(e,i=>{const s=i.get("sprite");s&&s.show()})})}_handleFillDragStart(t,e){const i=this.chart;if(i){const s=this.get("xAxis"),n=this.get("yAxis"),o=i.plotContainer.toLocal(t.point);this._dragStartPX=s.coordinateToPosition(o.x),this._dragStartY=this._getYValue(n.positionToValue(n.coordinateToPosition(o.y)));const a=this._di[e];a&&U.S6(a,(r,l)=>{this._dvpX[r]=s.valueToPosition(l.get("valueX",0)),this._dvY[r]=l.get("valueY")})}}_handleFillDragStop(t,e){const i=this.chart;if(i){const s=i.plotContainer.toLocal(t.point),n=this.get("xAxis"),o=this.get("yAxis"),a=n.coordinateToPosition(s.x),r=this._getYValue(o.positionToValue(o.coordinateToPosition(s.y))),l=a-this._dragStartPX,c=r-this._dragStartY,u=this._di[e];u&&U.S6(u,(b,C)=>{const k=this._dvpX[b],p=this._dvY[b];if(nt.hj(k)&&nt.hj(p)){const x=k+l;let y=p+c;const I=this.get("yAxis").getPrivate("stepDecimalPlaces",0)+1;y=Z.NM(y,I);const w=this._getXValue(n.positionToValue(x));this._setContext(C,"valueX",w),this._setContext(C,"valueY",y,!0),this._setXLocation(C,w)}})}this._updateSegment(e)}_updateSegment(t){this._updateElements()}_updateChildren(){this._updateElements(),this._valuesDirty&&this.markDirtyDrawings(),super._updateChildren()}_updateElements(){}markDirtyDrawings(){const t=this.get("xAxis");if(t){const e=t.chart;if(e){const i=e.getPrivate("stockChart");i&&i.markDirtyDrawings()}}}_getFillTemplate(){const t={},e=this.get("fillColor");null!=e&&(t.fill=e);const i=this.get("fillOpacity");return null!=i&&(t.fillOpacity=i),G.YS.new(t)}_getStrokeTemplate(){const t={},e=this.get("strokeColor");null!=e&&(t.stroke=e);const i=this.get("strokeOpacity");null!=i&&(t.strokeOpacity=i);const s=this.get("strokeDasharray");null!=s&&(t.strokeDasharray=s);const n=this.get("strokeWidth");return null!=n&&(t.strokeWidth=n),G.YS.new(t)}_tweakBullet(t,e){}_addBulletInteraction(t){t.events.on("dragged",e=>{this._handleBulletDragged(e),this._isDragging=!0}),t.events.on("dragstart",e=>{this._handleBulletDragStart(e)}),t.events.on("dragstop",e=>{this._handleBulletDragStop(e),this.setTimeout(()=>{this._isDragging=!1},100)}),t.events.on("click",e=>{if(this._erasingEnabled){const i=e.target.dataItem;if(i){const s=i.dataContext;s&&this._disposeIndex(s.index)}}else this._handlePointerClick(e)})}_handlePointerClick(t){if(this._drawingEnabled){const e=this.chart;e&&(this._clickPointerPoint=e.plotContainer.toLocal(t.point))}}_placeBulletsContainer(){this.children.moveValue(this.bulletsContainer),this.enableDrawing(),this.disableDrawing()}_handleBulletDragged(t){const e=t.target.dataItem;if(this.chart){const n=t.target,o={x:n.x(),y:n.y()};this._handleBulletDraggedReal(e,o)}const s=e.dataContext;s&&this._updateSegment(s.index)}_handleBulletDraggedReal(t,e){const i=this.get("xAxis"),s=this.get("yAxis"),n=this._getXValue(i.positionToValue(i.coordinateToPosition(e.x))),o=this._getYValue(s.positionToValue(s.coordinateToPosition(e.y)));this._setContext(t,"valueX",n),this._setContext(t,"valueY",o,!0),this._setXLocation(t,n),this._positionBullets(t)}_handleBulletDragStart(t){}_handleBulletDragStop(t){}_handlePointerOver(){}_handlePointerOut(){}enableDrawing(){const t=this.chart;this._erasingEnabled=!1,this._drawingEnabled=!0,t&&(this._clickDp||(this._clickDp=t.plotContainer.events.on("click",e=>{!e.originalEvent.button&&!this._erasingEnabled&&this._handlePointerClick(e)})),this._downDp||(this._downDp=t.plotContainer.events.on("pointerdown",e=>{!e.originalEvent.button&&!this._erasingEnabled&&this._handlePointerDown(e)})),this._upDp||(this._upDp=t.plotContainer.events.on("globalpointerup",e=>{!e.originalEvent.button&&!this._erasingEnabled&&this._handlePointerUp(e)})),this._moveDp||(this._moveDp=t.plotContainer.events.on("globalpointermove",e=>{this._erasingEnabled||this._handlePointerMove(e)})))}enableErasing(){this._erasingEnabled=!0}disableErasing(){this._erasingEnabled=!1}disableDrawing(){this._erasingEnabled=!1,this._drawingEnabled=!1,this._isDrawing=!1,this._clickDp&&(this._clickDp.dispose(),this._clickDp=void 0),this._downDp&&(this._downDp.dispose(),this._downDp=void 0),this._upDp&&(this._upDp.dispose(),this._upDp=void 0),this._hideAllBullets()}_handlePointerMove(t){const e=this.chart;e&&(this._movePointerPoint=e.plotContainer.toLocal(t.point))}_handlePointerDown(t){this._isPointerDown=!0}_handlePointerUp(t){this._isPointerDown=!1}startIndex(){return 0}endIndex(){return this.dataItems.length}_setXLocation(t,e){this._setXLocationReal(t,e)}_setXLocationReal(t,e){const s=this.get("xAxis").getPrivate("baseInterval"),n=this._root,o=n.locale.firstDayOfWeek,a=qt.NM(new Date(e),s.timeUnit,s.count,o,n.utc).getTime();let r=a+qt.g9(s.timeUnit,1.05*s.count);r=qt.NM(new Date(r),s.timeUnit,s.count,o,n.utc).getTime(),t.set("locationX",(e-a)/(r-a))}disposeDataItem(t){super.disposeDataItem(t);const e=t.dataContext;if(e){const i=e.index;this.markDirtyValues();const s=this._di[i];s&&U.S6(s,(n,o)=>{super.disposeDataItem(o)}),delete this._di[i]}}_getYValue(t){if("valueYChangeSelectionPercent"==this.get("valueYShow")){const s=this.getPrivate("baseValueSeries");if(s){const n=s._getBase("valueY");t=t/100*n+n}}const i=this.get("yAxis").getPrivate("stepDecimalPlaces",0)+1;return Z.NM(t,i)}_getXValue(t){const e=this.get("xAxis"),i=e.getPrivate("min",0)+1,s=e.getPrivate("max",1)-1;return Math.round(Z.C7(t,i,s))}_setContext(t,e,i,s){t.set(e,i),s&&t.set(e+"Working",i);const n=t.dataContext,o=this.get(e+"Field");o&&(n[o]=i)}}Object.defineProperty(H,"className",{enumerable:!0,configurable:!0,writable:!0,value:"DrawingSeries"}),Object.defineProperty(H,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:at.e.classNames.concat([H.className])});class st extends H{constructor(){super(...arguments),Object.defineProperty(this,"_pIndex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"polyline"})}_handlePointerClick(t){this._drawingEnabled&&(super._handlePointerClick(t),this._isDragging||(this._isDrawing=!0,0==this._index&&(this._index=1),0==this._pIndex&&this.data.push({stroke:this._getStrokeTemplate(),index:this._index,corner:"e"}),this._addPoint(t)))}_handleBulletDragStop(t){super._handleBulletDragStop(t),this._checkClosing(t)}_afterDataChange(){super._afterDataChange();const t=this.dataItems;t.length>0&&t[t.length-1].dataContext.closing&&(this._pIndex=0)}_addPoint(t){const e=this.chart;if(e){const i=this.get("xAxis"),s=this.get("yAxis"),n=e.plotContainer.toLocal(t.point),o=this._getXValue(i.positionToValue(i.coordinateToPosition(n.x))),a=this._getYValue(s.positionToValue(s.coordinateToPosition(n.y))),r=this.dataItems,l=r.length;this.data.push({valueY:a,valueX:o,index:this._index,corner:this._pIndex}),this.setPrivate("startIndex",0),this.setPrivate("endIndex",l);const c=r[l];this._positionBullets(c),this._setXLocation(c,o),this._pIndex++,this._handleClosing(c,n)}}_checkClosing(t){const e=t.target.dataItem;if(e){const i=t.target,s={x:i.x(),y:i.y()};this._handleClosing(e,s)}}_handleClosing(t,e){const i=t.dataContext;if(!i.closing){const s=i.index;if(this._di[s]){const n=this._di[s][0];if(n&&n!=t){const o=n.get("point");o&&Math.hypot(e.x-o.x,e.y-o.y)<5&&(i.closing=!0,this._pIndex=0,this.data.push({stroke:this._getStrokeTemplate(),index:s+1,corner:"e"}))}}}}_updateElements(){A.S6(this.dataItems,t=>{const e=t.dataContext;if(e&&e.closing&&this._di[e.index]){const s=this._di[e.index][0],n=s.get("valueX",0),o=s.get("valueY");this._setContext(t,"valueX",n),this._setContext(t,"valueY",o,!0),this._setXLocation(t,n),this._positionBullets(t);const a=t.bullets;a&&A.S6(a,r=>{const l=r.get("sprite");l&&l.set("forceHidden",!0)})}})}}Object.defineProperty(st,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PolylineSeries"}),Object.defineProperty(st,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:H.classNames.concat([st.className])});class _t extends H{constructor(){super(...arguments),Object.defineProperty(this,"_index",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_di",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"rectangle"})}_handleBulletDragged(t){super._handleBulletDragged(t);const e=t.target.dataItem,i=this._movePointerPoint;if(e&&i){const s=e.dataContext,n=s.index,o=s.corner,a=this.get("xAxis"),r=this.get("yAxis"),l=this._getXValue(a.positionToValue(a.coordinateToPosition(i.x))),c=this._getYValue(r.positionToValue(r.coordinateToPosition(i.y))),u="valueX",b="valueY";this._setContext(e,u,l),this._setContext(e,b,c,!0),this._setXLocation(e,l),this._positionBullets(e);const C=this._di[n];if(C){const k=C.bl,p=C.br,x=C.tl,y=C.tr,D=C.tl2;k&&p&&x&&y&&D&&("br"==o&&(this._setContext(k,b,c,!0),this._setContext(y,u,l),this._setXLocation(y,l)),"tr"==o&&(this._setContext(p,u,l),this._setXLocation(p,l),this._setContext(x,b,c,!0),this._setContext(D,b,c,!0)),"bl"==o&&(this._setContext(p,b,c,!0),this._setContext(x,u,l),this._setContext(D,u,l),this._setXLocation(x,l),this._setXLocation(D,l)),"tl2"==o&&(this._setContext(k,u,l),this._setXLocation(k,l),this._setContext(y,b,c,!0),this._setContext(x,u,l),this._setXLocation(x,l),this._setContext(x,b,c,!0)))}}}_handlePointerClick(t){this._drawingEnabled&&(super._handlePointerClick(t),this._isDragging||(this._isDrawing?this._isDrawing=!1:(this._index++,this._isDrawing=!0,this.bulletsContainer.show(),this._addPoints(t,this._index))))}_handlePointerMove(t){if(super._handlePointerMove(t),this._isDrawing){const e=this._movePointerPoint;if(e){const i=this.get("xAxis"),s=this.get("yAxis"),n=this._getXValue(i.positionToValue(i.coordinateToPosition(e.x))),o=this._getYValue(s.positionToValue(s.coordinateToPosition(e.y))),r=this._di[this._index];if(r){const l=r.tr,c=r.br,u=r.bl;l&&c&&u&&(this._setContext(l,"valueX",n),this._setContext(c,"valueX",n),this._setXLocation(l,n),this._setXLocation(c,n),this._setContext(c,"valueY",o,!0),this._setContext(u,"valueY",o,!0))}}}}_addPoints(t,e){const i=this.chart;if(i){this.data.push({stroke:this._getStrokeTemplate(),fill:this._getFillTemplate(),index:e,corner:"e"});const s=this.get("xAxis"),n=this.get("yAxis"),o=i.plotContainer.toLocal(t.point),a=this._getXValue(s.positionToValue(s.coordinateToPosition(o.x))),r=this._getYValue(n.positionToValue(n.coordinateToPosition(o.y)));this._di[e]={},this._addPoint(a,r,"tl",e),this._addPoint(a,r,"tr",e),this._addPoint(a,r,"br",e),this._addPoint(a,r,"bl",e),this._addPoint(a,r,"tl2",e)}}_addPoint(t,e,i,s){this.data.push({valueY:e,valueX:t,corner:i,index:s});const n=this.dataItems.length,o=this.dataItems[n-1];if(o)return null!=t&&this._setXLocation(o,t),this.setPrivate("startIndex",0),this.setPrivate("endIndex",n),o.dataContext}}Object.defineProperty(_t,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RectangleSeries"}),Object.defineProperty(_t,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:H.classNames.concat([_t.className])});var ee=g(4905),Bt=g(7379);class R extends H{constructor(){super(...arguments),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"line"}),Object.defineProperty(this,"_updateExtension",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lines",{enumerable:!0,configurable:!0,writable:!0,value:new Bt.o(G.YS.new({}),()=>ee.x._new(this._root,{},[this.lines.template]))}),Object.defineProperty(this,"hitLines",{enumerable:!0,configurable:!0,writable:!0,value:new Bt.o(G.YS.new({}),()=>ee.x._new(this._root,{},[this.hitLines.template]))}),Object.defineProperty(this,"_di",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_lines",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_hitLines",{enumerable:!0,configurable:!0,writable:!0,value:[]})}makeLine(){const t=this.lines.make();return this.mainContainer.children.push(t),this.lines.push(t),t}makeHitLine(){const t=this.hitLines.make();return t.addTag("hit"),this.mainContainer.children.push(t),this.hitLines.push(t),t}_afterNew(){super._afterNew();const t=this.lines.template;t.events.on("pointerover",i=>{this._showSegmentBullets(i.target.get("userData"))}),t.events.on("pointerout",i=>{this._hideAllBullets();const s=i.target.get("userData"),n=this._lines[s];n&&n.unhover();const o=this._getStrokeIndex(s),a=this.strokes.getIndex(o);a&&a.unhover()});const e=this.hitLines.template;e.events.on("pointerover",i=>{const s=i.target.get("userData");this._showSegmentBullets(s);const n=this._lines[s];n&&n.hover();const o=this._getStrokeIndex(s),a=this.strokes.getIndex(o);a&&a.hover()}),e.events.on("click",i=>{this._erasingEnabled&&this._disposeIndex(i.target.get("userData"))}),e.events.on("dragstart",i=>{const s=i.target.get("userData"),n=this._lines[s];n&&n.dragStart(i);const o=this._getStrokeIndex(s),a=this.strokes.getIndex(o);a&&a.dragStart(i)}),e.events.on("dragstop",i=>{const s=i.target.get("userData");this.markDirtyValues(),i.target.setAll({x:0,y:0});const n=this._lines[s];n&&(n.dragStop(i),n.setAll({x:0,y:0}));const o=this._getStrokeIndex(s),a=this.strokes.getIndex(o);a&&(a.dragStop(i),a.setAll({x:0,y:0}))}),e.events.on("pointerout",i=>{const s=i.target.get("userData");this._hideAllBullets();const n=this._lines[s];n&&n.unhover();const o=this._getStrokeIndex(s),a=this.strokes.getIndex(o);a&&a.unhover()})}_updateElements(){const t=this.chart;if(t){const e=2*Math.max(t.plotContainer.width(),t.plotContainer.height());for(let i=0;i<this._lines.length;i++){const s=this._lines[i];if(s){const n=this._hitLines[i],o=this._di[i].p1,a=this._di[i].p2;if(o&&a){const r=o.get("point"),l=a.get("point");if(r&&l){const c=Math.max(Math.abs(e-r.x),Math.abs(e-l.x),Math.abs(e-r.y),Math.abs(e-l.y),Math.abs(r.x),Math.abs(l.x),Math.abs(r.y),Math.abs(l.y));let u=Z._O(l,r);const b={x:r.x+c*Z.mC(u),y:r.y+c*Z.O$(u)},C={x:l.x-c*Z.mC(u),y:l.y-c*Z.O$(u)};this._updateLine(s,n,b,C,r,l)}}}}}}_updateLine(t,e,i,s,n,o){let r=[[[i,s]]];t.set("segments",[[[i,n]],[[o,s]]]),e.set("segments",r)}_handlePointerClickReal(t){this._isDragging||(this._isDrawing?this._isDrawing=!1:(this._isDrawing=!0,this._index++,this._addPoints(t,this._index)))}_handlePointerClick(t){this._drawingEnabled&&(super._handlePointerClick(t),this._handlePointerClickReal(t))}_handlePointerMove(t){super._handlePointerMove(t),this._handlePointerMoveReal(t)}_handlePointerMoveReal(t){if(this._isDrawing){const e=this._movePointerPoint;if(e){const i=this.get("xAxis"),s=this.get("yAxis"),n=this._getXValue(i.positionToValue(i.coordinateToPosition(e.x))),o=this._getYValue(s.positionToValue(s.coordinateToPosition(e.y))),a=this._index,l=this._di[a].p2;this._di[a].p1&&l&&(this._setContext(l,"valueX",n),this._setContext(l,"valueY",o,!0),this._setXLocation(l,n),this._updateSegment(a))}}}_createElements(t){if(!this._lines[t]){const e=this.makeLine();this._lines[t]=e;const i=this.makeHitLine();this._hitLines[t]=i;const s=this.dataItems[this.dataItems.length-1].dataContext;let n=this.get("showExtension",!0),o=this.get("strokeColor",this.get("stroke"));const a=s.stroke;a&&(o=a.get("stroke"),this._updateExtensionLine(e,a)),s&&(n=s.showExtension),e.setPrivate("visible",n);const r={stroke:o,userData:t};e.setAll(r),i.setAll(r),this._updateSegment(t)}}_updateExtensionLine(t,e){}_addTemplates(t){this.data.push({stroke:this._getStrokeTemplate(),fill:this._getFillTemplate(),index:t,showExtension:this.get("showExtension",!0),corner:"e"})}_addPoints(t,e){const i=this.chart;this._addTemplates(e);const s=this.get("xAxis"),n=this.get("yAxis"),o=i.plotContainer.toLocal(t.point),a=this._getXValue(s.positionToValue(s.coordinateToPosition(o.x))),r=this._getYValue(n.positionToValue(n.coordinateToPosition(o.y)));this._addPoint(a,r,"p1",e),this._addPoint(a,r,"p2",e)}_addPoint(t,e,i,s){this.data.push({valueY:e,valueX:t,corner:i,index:s})}disposeDataItem(t){super.disposeDataItem(t);const e=t.dataContext;if(e){const i=e.index,s=this._lines[i];s&&(this.lines.removeValue(s),delete this._lines[i],s.dispose());const n=this._hitLines[i];n&&(this.hitLines.removeValue(n),delete this._hitLines[i],n.dispose())}}}Object.defineProperty(R,"className",{enumerable:!0,configurable:!0,writable:!0,value:"SimpleLineSeries"}),Object.defineProperty(R,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:H.classNames.concat([R.className])});class Ct extends R{constructor(){super(...arguments),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"horizontal"}),Object.defineProperty(this,"_updateExtension",{enumerable:!0,configurable:!0,writable:!0,value:!0})}_handleBulletDragged(t){super._handleBulletDragged(t);const i=t.target.dataItem.dataContext;if(i){const s=i.index,n=this._di[s].p1,o=this._di[s].p2,r=this._movePointerPoint;if(n&&o&&this._di[s].e&&r){const l=this.get("yAxis"),c=this.get("xAxis"),u=this._getYValue(l.positionToValue(l.coordinateToPosition(r.y))),b=this._getXValue(c.positionToValue(c.coordinateToPosition(r.x)));this._setContext(n,"valueY",u,!0),this._setContext(o,"valueY",u,!0),this._setContext(n,"valueX",b),this._setContext(o,"valueX",b+1),this._setXLocation(n,b),this._setXLocation(o,b+1),this._positionBullets(n),this._positionBullets(o)}}}_updateExtensionLine(t,e){t.setAll({stroke:e.get("stroke"),strokeWidth:e.get("strokeWidth"),strokeDasharray:e.get("strokeDasharray"),strokeOpacity:e.get("strokeOpacity")})}_handlePointerMoveReal(){}_handlePointerClickReal(t){this._drawingEnabled&&(this._isDragging||(this._index++,this._addPoints(t,this._index),this._isDrawing=!1))}}Object.defineProperty(Ct,"className",{enumerable:!0,configurable:!0,writable:!0,value:"HorizontalLineSeries"}),Object.defineProperty(Ct,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:R.classNames.concat([Ct.className])});class Pt extends R{constructor(){super(...arguments),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"vertical"})}_handleBulletDragged(t){super._handleBulletDragged(t);const i=t.target.dataItem.dataContext;if(i){const s=i.index,n=this._di[s].p1,o=this._di[s].p2,a=this._movePointerPoint;if(n&&o&&a){const r=this.get("yAxis"),l=this.get("xAxis"),c=this._getYValue(r.positionToValue(r.coordinateToPosition(a.y))),u=this._getXValue(l.positionToValue(l.coordinateToPosition(a.x)));this._setContext(n,"valueY",c,!0),this._setContext(o,"valueY",c+.01,!0),this._setContext(n,"valueX",u),this._setContext(o,"valueX",u),this._setXLocation(n,u),this._setXLocation(o,u),this._positionBullets(n),this._positionBullets(o)}}}_updateSegment(t){if(this._di[t]){const e=this._di[t].p1,i=this._di[t].p2;e&&i&&this._setContext(i,"valueY",e.get("valueY",0)+.01,!0)}}_handlePointerMoveReal(){}_updateExtensionLine(t,e){t.setAll({stroke:e.get("stroke"),strokeWidth:e.get("strokeWidth"),strokeDasharray:e.get("strokeDasharray"),strokeOpacity:e.get("strokeOpacity")})}_handlePointerClickReal(t){this._drawingEnabled&&(this._isDragging||(this._index++,this._addPoints(t,this._index),this._isDrawing=!1,this._updateSegment(this._index)))}}Object.defineProperty(Pt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"VerticalLineSeries"}),Object.defineProperty(Pt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:R.classNames.concat([Pt.className])});class yt extends R{constructor(){super(...arguments),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"average"})}_updateSegment(t){if(this._di[t]){const s=this._di[t].p1,n=this._di[t].p2,o=this.get("series");if(o&&s&&n){const a=this.get("xAxis"),r=a.getPrivate("min",0)+1,l=a.getPrivate("max",1)-1;let c=Math.round(Z.C7(s.get("valueX"),r,l)),u=Math.round(Z.C7(n.get("valueX"),r,l));const b=a.getSeriesItem(o,Math.max(0,a.valueToPosition(c))),C=a.getSeriesItem(o,Math.min(1,a.valueToPosition(u))),k=this.get("field")+"Y";if(b&&C){let p=o.dataItems.indexOf(b),x=o.dataItems.indexOf(C);p>x&&([p,x]=[x,p]);let y=0,D=0;for(var i=p;i<=x;i++){const m=o.dataItems[i].get(k);null!=m&&(y+=m,D++)}const I=y/D;s.set("valueX",c),n.set("valueX",u),this._setContext(s,"valueX",c),this._setContext(n,"valueX",u),this._setContext(s,"valueY",I,!0),this._setContext(n,"valueY",I,!0),this._positionBullets(s),this._positionBullets(n)}}this._updateElements()}}_setXLocation(){}}Object.defineProperty(yt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AverageSeries"}),Object.defineProperty(yt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:R.classNames.concat([yt.className])});var le=g(7194),ce=g.n(le);class wt extends R{constructor(){super(...arguments),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"regression"})}_updateSegment(t){const e=this._di[t].p1,i=this._di[t].p2,s=this.get("series");if(s&&e&&i){const n=s.get("xAxis");let o=this._getXValue(e.get("valueX")),a=this._getXValue(i.get("valueX"));const r=n.getSeriesItem(s,n.valueToPosition(o)),l=n.getSeriesItem(s,n.valueToPosition(a)),c=this.get("field")+"Y";if(r&&l){const u=s.dataItems;let b=u.indexOf(r),C=u.indexOf(l),k=!1;b>C&&(k=!0,[b,C]=[C,b]);const p=[];let x=0;for(let w=b;w<=C;w++)p.push([x,u[w].get(c)]),x++;const D=ce().linear(p).points;if(D.length>1){const w=D[0],m=D[D.length-1];if(w&&m){let F=w[1],T=m[1];k&&([F,T]=[T,F]),this._setContext(e,"valueY",F,!0),this._setContext(i,"valueY",T,!0),this._setContext(e,"valueX",o),this._setContext(i,"valueX",a),this._positionBullets(e),this._positionBullets(i)}}}}}_setXLocation(){}}Object.defineProperty(wt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RegressionSeries"}),Object.defineProperty(wt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:R.classNames.concat([wt.className])});class St extends H{constructor(){super(...arguments),Object.defineProperty(this,"_panX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_panY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pIndex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"doodle"})}_afterNew(){super._afterNew(),this.addTag("doodle"),this.bullets.clear()}_handlePointerMove(t){super._handlePointerMove(t),this._drawingEnabled&&this._isPointerDown&&this._handleBulletPosition(t)}_handleBulletPosition(t){const e=this.chart;if(e){const i=this.get("xAxis"),s=this.get("yAxis"),n=e.plotContainer.toLocal(t.point),o=this._getXValue(i.positionToValue(i.coordinateToPosition(n.x))),a=this._getYValue(s.positionToValue(s.coordinateToPosition(n.y))),r=this._index;this.data.push({valueY:a,valueX:o,index:r,corner:this._pIndex});const l=this.dataItems.length,c=this.dataItems[l-1];this._setXLocation(c,o);let u=this._di[r];u||(u={}),u[this._pIndex]=c,this._di[r]=u,this._pIndex++,this.setPrivate("startIndex",0),this.setPrivate("endIndex",l)}}_handleFillDragStart(t,e){this._drawingEnabled||super._handleFillDragStart(t,e)}_handlePointerDown(t){super._handlePointerDown(t);const e=this.chart;if(e){this._index++,this._pIndex=0,this._panX=e.get("panX"),this._panY=e.get("panY"),e.set("panX",!1),e.set("panY",!1);const i=e.get("cursor");i&&i.setPrivate("visible",!1),this.data.push({stroke:this._getStrokeTemplate(),index:this._index,corner:this._pIndex})}}_handlePointerUp(t){super._handlePointerUp(t);const e=this.chart;e&&this.setTimeout(()=>{e.set("panX",this._panX),e.set("panY",this._panY);const i=e.get("cursor");i&&i.setPrivate("visible",!0)},100)}}Object.defineProperty(St,"className",{enumerable:!0,configurable:!0,writable:!0,value:"DoodleSeries"}),Object.defineProperty(St,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:H.classNames.concat([St.className])});var he=g(314),ie=g(7471);class rt extends st{constructor(){super(...arguments),Object.defineProperty(this,"spriteResizer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(ie.b.new(this._root,{}))}),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"icon"})}_afterNew(){super._afterNew(),this.bullets.clear(),this.strokes.template.set("visible",!1),this.fills.template.set("visible",!1),this.bullets.push((t,e,i)=>{const n=i.dataContext.settings,o=he.T.new(t,{draggable:!0,themeTags:["icon"]},n);return this._addBulletInteraction(o),o.events.on("click",()=>{const a=this.spriteResizer;a.get("sprite")==o?a.set("sprite",void 0):a.set("sprite",o)}),o.events.on("pointerover",()=>{this._isHover=!0}),o.events.on("pointerout",()=>{this._isHover=!1}),this.spriteResizer.set("sprite",void 0),o.on("scale",a=>{n.set("scale",a)}),o.on("rotation",a=>{n.set("rotation",a)}),mt.g.new(this._root,{locationX:void 0,sprite:o})})}_handlePointerClick(t){this._drawingEnabled&&!this._isHover&&(super._handlePointerClick(t),this.data.getIndex(this.data.length-1).settings=this._getIconTemplate(),this._index++,this._di[this._index]={})}disposeDataItem(t){super.disposeDataItem(t),this.spriteResizer.set("sprite",void 0),this._isHover=!1}_hideAllBullets(){}_setXLocation(t,e){this.get("snapToData")||this._setXLocationReal(t,e)}_getIconTemplate(){const t={},e=this.get("iconSvgPath");null!=e&&(t.svgPath=e);const i=this.get("iconScale");null!=i&&(t.scale=i);const s=this.get("iconCenterX");null!=s&&(t.centerX=s);const n=this.get("iconCenterY");null!=n&&(t.centerY=n);const o=this.get("strokeColor");null!=o&&(t.stroke=o);const a=this.get("strokeOpacity");null!=a&&(t.strokeOpacity=a);const r=this.get("fillColor");null!=r&&(t.fill=r);const l=this.get("fillOpacity");return null!=l&&(t.fillOpacity=l),G.YS.new(t)}}Object.defineProperty(rt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"IconSeries"}),Object.defineProperty(rt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:st.classNames.concat([rt.className])});var se=g(1705),ue=g(1519),dt=g(8230),gt=g(7166);class lt extends st{constructor(){super(...arguments),Object.defineProperty(this,"spriteResizer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(ie.b.new(this._root,{}))}),Object.defineProperty(this,"_clickEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"label"})}_afterNew(){super._afterNew(),this.strokes.template.set("visible",!1),this.fills.template.set("visible",!1),this.addTag(this._tag);const t=document.createElement("div");t.style.position="absolute",t.style.display="none",t.className="am5stock-drawing-label-wrapper",this._root._inner.appendChild(t),this.setPrivate("inputContainer",t);const e=document.createElement("textarea");e.className="am5stock-drawing-label-input",gt.Oo(e,"input",()=>{e.style.height="auto",e.style.height=e.scrollHeight+"px"},!1),t.appendChild(e),t.appendChild(document.createElement("br")),this.setPrivate("input",e);const i=document.createElement("input");i.type="button",i.value=this._root.language.translateAny("Save"),i.className="am5-modal-button am5-modal-primary",gt.Oo(i,"click",()=>{this.saveText()}),t.appendChild(i);const s=document.createElement("input");s.type="button",s.value=this._root.language.translateAny("Cancel"),s.className="am5-modal-button am5-modal-scondary",gt.Oo(s,"click",()=>{this.getPrivate("inputContainer").style.display="none",this.getPrivate("input").value=""}),t.appendChild(s)}_tweakBullet(t,e){const i=e.dataContext,n=i.settings,o=t.children.push(se._.new(this._root,{themeTags:["label"],text:i.text},n));this.setPrivate("label",o),t.events.on("click",()=>{const a=this.spriteResizer;a.get("sprite")==o?a.set("sprite",void 0):a.set("sprite",o)}),t.events.on("pointerover",()=>{this._isHover=!0}),t.events.on("pointerout",()=>{this._isHover=!1}),o.on("scale",a=>{n.set("scale",a)}),o.on("rotation",a=>{n.set("rotation",a)}),this._tweakBullet2(o,e)}_tweakBullet2(t,e){t.set("background",ue.c.new(this._root,{fillOpacity:0,strokeOpacity:0,fill:(0,dt.$_)(16777215)}))}_handlePointerClick(t){if(this._drawingEnabled&&!this._isHover){this._index++,this._di[this._index]={};const e=this.getPrivate("input");e.value="",this._clickEvent=t;const i=this.getPrivate("inputContainer");i.style.display="block",i.style.left=t.point.x+"px",i.style.top=t.point.y+"px",e.focus(),this.spriteResizer.set("sprite",void 0)}}saveText(){const t=this._clickEvent;if(t){const e=this.getPrivate("input").value;if(null!=e){this._addPoint(t);const i=this.data.getIndex(this.data.length-1);i.text=e,i.index=this._index,i.corner=0,i.settings=this._getLabelTemplate(),this._afterTextSave(i)}this.getPrivate("inputContainer").style.display="none"}}_afterTextSave(t){}_getLabelTemplate(){const t={},e=this.get("labelFontSize");null!=e&&(t.fontSize=e);const i=this.get("labelFontFamily");null!=i&&(t.fontFamily=i);const s=this.get("labelFontWeight");null!=s&&(t.fontWeight=s);const n=this.get("labelFill");return null!=n&&(t.fill=n),G.YS.new(t)}disposeDataItem(t){super.disposeDataItem(t),this.spriteResizer.set("sprite",void 0),this._isHover=!1}_hideAllBullets(){}}Object.defineProperty(lt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"LabelSeries"}),Object.defineProperty(lt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:st.classNames.concat([lt.className])});var ne=g(1136),oe=g(7636);class pt extends lt{constructor(){super(...arguments),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"callout"})}_afterNew(){super._afterNew()}_tweakBullet2(t,e){t.set("background",ne.i.new(this._root,{themeTags:["callout"]},e.dataContext.bgSettings))}_tweakBullet(t,e){super._tweakBullet(t,e),t.events.off("click");const i=e.dataContext,s=i.settings,n=this.getPrivate("label");if(n){n.events.on("positionchanged",()=>{this._updatePointer(n)}),n.events.on("click",()=>{const a=this.spriteResizer;a.get("sprite")==n?a.set("sprite",void 0):a.set("sprite",n),this._erasingEnabled&&this._disposeIndex(i.index)}),n.on("scale",()=>{this._updatePointer(n)}),n.on("rotation",()=>{this._updatePointer(n)}),n.setAll({draggable:!0}),n.on("x",a=>{s.set("x",a)}),n.on("y",a=>{s.set("y",a)});const o=n.states.lookup("default");setTimeout(()=>{n.animate({key:"y",to:-n.height()/2-10,from:0,duration:o.get("stateAnimationDuration",500),easing:o.get("stateAnimationEasing",oe.C0(oe.T7))})},50)}}_updatePointer(t){const e=t.get("background");if(e instanceof ne.i){const i=t.parent;if(i){let s=i.toGlobal({x:0,y:0});s=e.toLocal(s),e.setAll({pointerX:s.x,pointerY:s.y})}}}_afterTextSave(t){t.bgSettings=this._getBgTemplate()}_hideAllBullets(){}_getBgTemplate(){const t={},e=this.get("fillColor");return null!=e&&(t.fill=e),G.YS.new(t)}_setXLocation(t,e){this.get("snapToData")||this._setXLocationReal(t,e)}}Object.defineProperty(pt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"CalloutSeries"}),Object.defineProperty(pt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:lt.classNames.concat([pt.className])});var de=g(6415);class Dt extends H{constructor(){super(...arguments),Object.defineProperty(this,"_ellipses",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"ellipse"}),Object.defineProperty(this,"_clickPX",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_clickVY",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"ellipses",{enumerable:!0,configurable:!0,writable:!0,value:new Bt.o(G.YS.new({radiusX:0,radiusY:0}),()=>de.P._new(this._root,{radiusX:0,radiusY:0,templateField:"settings"},[this.ellipses.template]))})}makeEllipse(){const t=this.ellipses.make();return this.mainContainer.children.push(t),this.ellipses.push(t),t}_afterNew(){super._afterNew(),this.strokes.template.set("visible",!1),this.fills.template.set("visible",!1);const t=this.ellipses.template;t.events.on("pointerover",e=>{this._showSegmentBullets(e.target.get("userData"))}),t.events.on("pointerout",()=>{this._hideAllBullets()}),t.events.on("dragstart",e=>{this._handleFillDragStart(e,e.target.get("userData"))}),t.events.on("dragstop",e=>{this._handleFillDragStop(e,e.target.get("userData"))}),t.events.on("click",e=>{this._erasingEnabled&&this._disposeIndex(e.target.get("userData"))})}_handleFillDragStop(t,e){super._handleFillDragStop(t,e);const i=this._di[e],s=i.b,n=i.t,o=i.r,a=i.l,r=this.get("xAxis");if(s&&n&&o&&a){const l=r.valueToPosition(a.get("valueX",0)),c=r.valueToPosition(o.get("valueX",0));let u=this._getXValue(r.positionToValue(l+(c-l)/2));this._setContext(n,"valueX",u),this._setContext(s,"valueX",u),this._setXLocation(n,u),this._setXLocation(s,u)}}_handleBulletDragged(t){const e=t.target.dataItem,i=e.get("valueX"),s=e.get("locationX"),n=e.get("valueY");super._handleBulletDragged(t);const o=this._movePointerPoint;if(e&&o){const a=e.dataContext,r=a.index,l=a.corner,c=this.get("xAxis"),u=this.get("yAxis"),b=this._getXValue(c.positionToValue(c.coordinateToPosition(o.x))),C=this._getYValue(u.positionToValue(u.coordinateToPosition(o.y))),k="valueX",p="valueY",x="valueYWorking",y=this._di[r],D=y.b,I=y.t,w=y.r,m=y.l;if(D&&I&&w&&m){if("b"==l){const F=I.get(x,0);this._setContext(D,p,C,!0);let T=F+(C-F)/2;this._setContext(w,p,T,!0),this._setContext(m,p,T,!0),this._setContext(D,k,i),D.set("locationX",s)}if("t"==l){const F=D.get(x,0);this._setContext(I,p,C,!0);let T=F+(C-F)/2;this._setContext(w,p,T,!0),this._setContext(m,p,T,!0),this._setContext(I,k,i),I.set("locationX",s)}if("l"==l){const F=w.get(k,0),T=c.valueToPosition(F),W=c.valueToPosition(b);this._setContext(m,k,b),this._setXLocation(m,b);let Y=this._getXValue(c.positionToValue(T+(W-T)/2));this._setContext(I,k,Y),this._setContext(D,k,Y),this._setXLocation(I,Y),this._setXLocation(D,Y),this._setContext(m,p,n,!0)}if("r"==l){const F=m.get(k,0),T=c.valueToPosition(F),W=c.valueToPosition(b);this._setContext(w,k,b),this._setXLocation(w,b);let Y=this._getXValue(c.positionToValue(T+(W-T)/2));this._setContext(I,k,Y),this._setContext(D,k,Y),this._setXLocation(I,Y),this._setXLocation(D,Y),this._setContext(w,p,n,!0)}}this._positionBullets(e)}}_handlePointerClick(t){this._drawingEnabled&&(super._handlePointerClick(t),this._isDragging||(this._isDrawing?this._isDrawing=!1:(this._index++,this._isDrawing=!0,this.bulletsContainer.show(),this._addPoints(t,this._index))))}_createElements(t,e){if(!this._ellipses[t]){const i=this.makeEllipse();i._setDataItem(e),this._ellipses[t]=i,i.setAll({userData:t})}}_handlePointerMove(t){if(super._handlePointerMove(t),this._isDrawing){const e=this._movePointerPoint;if(e){const i=this.get("xAxis"),s=this.get("yAxis"),n=this._index;if(this._di[n]){const a=this._di[n].t,r=this._di[n].b,l=this._di[n].l,c=this._di[n].r,u=this._clickVY,b=i.coordinateToPosition(e.x),C=this._clickPX,k=this._getXValue(i.positionToValue(i.coordinateToPosition(e.x))),p=this._getYValue(s.positionToValue(s.coordinateToPosition(e.y)));if(r&&l&&c&&a){this._setContext(r,"valueY",p,!0);const x=u+(p-u)/2,y=this._getXValue(i.positionToValue(C+(b-C)/2));this._setContext(c,"valueY",x,!0),this._setContext(l,"valueY",x,!0),this._setContext(r,"valueX",y),this._setContext(a,"valueX",y),this._setXLocation(r,y),this._setXLocation(a,y),this._setContext(c,"valueX",k),this._setXLocation(c,k)}}}}}_addPoints(t,e){const i=this.chart;if(i){this.data.push({settings:this._getEllipseTemplate(),stroke:this._getStrokeTemplate(),index:e,corner:"e"});const s=this.get("xAxis"),n=this.get("yAxis"),o=i.plotContainer.toLocal(t.point);this._clickPX=s.coordinateToPosition(o.x);const a=this._getXValue(s.positionToValue(this._clickPX)),r=this._getYValue(n.positionToValue(n.coordinateToPosition(o.y)));this._clickVY=r,this._di[e]={},this._addPoint(a,r,"l",e),this._addPoint(a,r,"t",e),this._addPoint(a,r,"b",e),this._addPoint(a,r,"r",e)}}_addPoint(t,e,i,s){this.data.push({valueY:e,valueX:t,index:s,corner:i});const n=this.dataItems.length,o=this.dataItems[n-1];o&&(this._setXLocation(o,t),this.setPrivate("startIndex",0),this.setPrivate("endIndex",n))}_updateChildren(){super._updateChildren();let t=0;A.S6(this._di,e=>{if(e){const i=e.t,s=e.b,n=e.l,o=e.r;if(i&&s&&n&&o){const a=i.get("point"),r=s.get("point"),l=o.get("point"),c=n.get("point");if(a&&r&&l&&c){const u=(l.x-c.x)/2,b=(r.y-a.y)/2,p=this._ellipses[t];p&&p.setAll({x:c.x+u,y:a.y+b,radiusX:u,radiusY:b})}}}t++})}disposeDataItem(t){super.disposeDataItem(t);const e=t.dataContext;if(e){const i=e.index,s=this._ellipses[i];s&&(delete this._ellipses[i],this.ellipses.removeValue(s),s.dispose())}}_getEllipseTemplate(){const t=this._getStrokeTemplate(),e=this.get("fillColor");null!=e&&t.set("fill",e);const i=this.get("fillOpacity");return null!=i&&t.set("fillOpacity",i),t}}Object.defineProperty(Dt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"EllipseSeries"}),Object.defineProperty(Dt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:H.classNames.concat([Dt.className])});class kt extends R{constructor(){super(...arguments),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"trendline"})}_updateSegment(t){const e=this._di[t].p1,i=this._di[t].p2,s=this.get("series");if(s&&e&&i){const n=this.get("xAxis");let o=this._getXValue(e.get("valueX")),a=this._getXValue(i.get("valueX"));const r=n.getSeriesItem(s,Math.max(0,n.valueToPosition(o))),l=n.getSeriesItem(s,Math.min(1,n.valueToPosition(a))),c=this.get("field")+"Y";if(r&&l){let u=r.get(c),b=l.get(c);this._setContext(e,"valueY",u,!0),this._setContext(i,"valueY",b,!0),this._setContext(e,"valueX",o),this._setContext(i,"valueX",a),this._positionBullets(e),this._positionBullets(i)}}}_setXLocation(){}}Object.defineProperty(kt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"TrendLineSeries"}),Object.defineProperty(kt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:R.classNames.concat([kt.className])});class It extends R{constructor(){super(...arguments),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"quadrant"})}_afterNew(){super._afterNew(),this.strokes.template.set("visible",!1)}_updateSegment(t){const e=this._movePointerPoint,i=this._di[t].p1,s=this._di[t].p2,n=this.get("series");if(n&&e&&i&&s){const o=this.get("xAxis");let a=this._getXValue(i.get("valueX")),r=this._getXValue(s.get("valueX"));const l=o.getSeriesItem(n,Math.max(0,o.valueToPosition(a))),c=o.getSeriesItem(n,Math.min(1,o.valueToPosition(r))),u=this.get("field")+"Y";if(l&&c){let b=l.get(u),C=c.get(u);this._setContext(i,"valueY",b,!0),this._setContext(s,"valueY",C,!0),this._setContext(i,"valueX",a),this._setContext(s,"valueX",r),this._positionBullets(i),this._positionBullets(s)}}}_updateChildren(){super._updateChildren();const t=this.chart;if(this.fills.clear(),t)for(let e=0;e<this._lines.length;e++){const i=this._lines[e];if(i){const s=this._di[e].p1,n=this._di[e].p2,a=this._di[e].e.dataContext,r=this.makeFill(this.fills),l=this.makeFill(this.fills);for(let y=this.dataItems.indexOf(s);y>=0;y--){const I=this.dataItems[y].dataContext.fill;I&&(r.template=I,l.template=I)}const u=[this.dataItems.indexOf(s),this.dataItems.indexOf(n)];let b=this.get("fillColor",this.get("fill"));const C=a.fill;C&&(b=C.get("fill"));const k={userData:u,fill:b};r.setAll(k),l.setAll(k),l.set("forceInactive",!0);const p=s.get("point"),x=n.get("point");if(p&&x){const y=(x.y-p.y)/4,D=p.y+y,I=p.y+2*y,w=p.y+3*y;i.set("draw",m=>{m.moveTo(p.x,p.y),m.lineTo(x.x,p.y),m.moveTo(p.x,D),m.lineTo(x.x,D),m.moveTo(p.x,I),m.lineTo(x.x,I),m.moveTo(p.x,w),m.lineTo(x.x,w),m.moveTo(p.x,x.y),m.lineTo(x.x,x.y)}),r.set("draw",m=>{m.moveTo(p.x,p.y),m.lineTo(x.x,p.y),m.lineTo(x.x,x.y),m.lineTo(p.x,x.y),m.lineTo(p.x,p.y)}),l.set("draw",m=>{m.moveTo(p.x,D),m.lineTo(x.x,D),m.lineTo(x.x,w),m.lineTo(p.x,w),m.lineTo(p.x,D)})}}}}_drawFill(){}_setXLocation(){}_updateLine(){}}Object.defineProperty(It,"className",{enumerable:!0,configurable:!0,writable:!0,value:"QuadrantLineSeries"}),Object.defineProperty(It,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:R.classNames.concat([It.className])});class ct extends R{constructor(){super(...arguments),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"fibonacci"}),Object.defineProperty(this,"_labels",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_fills",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_strokes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"labels",{enumerable:!0,configurable:!0,writable:!0,value:new Bt.o(G.YS.new({}),()=>se._._new(this._root,{},[this.labels.template]))})}makeLabel(){const t=this.labels.make();return this.mainContainer.children.push(t),this.labels.push(t),t}_updateSegment(t){super._updateSegment(t),this._updateSegmentReal(t)}_updateSegmentReal(t){const e=this._di[t];if(e){const i=e.p1,s=e.p2;if(i&&s){const n=i.get("valueX",0);this._setContext(s,"valueX",n),this._setXLocation(s,n)}}}_addTemplates(t){this.data.push({stroke:this._getStrokeTemplate(),fill:this._getFillTemplate(),index:t,corner:"e"})}_updateChildren(){super._updateChildren(),this._updateChildrenReal()}_updateChildrenReal(){const t=this.chart;if(t){const e=this.get("yAxis");for(let i=0;i<this._lines.length;i++)if(this._lines[i]){const n=this._di[i].p1,o=this._di[i].p2,a=n.get("point"),r=o.get("point"),l=n.get("valueX",0);if(this._setContext(o,"valueX",l),this._setXLocation(o,l),a&&r){r.x=t.plotContainer.width();const c=this.get("sequence",[]);let u=0;const b=this._labels[i],C=this._strokes[i],k=this._fills[i];for(let p=0;p<c.length;p++){const x=c[p],y=b[p],D=k[p],I=C[p];let w=this.get("colors",[])[p],m=w;D.set("fill",w),I.set("stroke",m);const F=a.y+(r.y-a.y)*u,T=a.y+(r.y-a.y)*x,W=e.positionToValue(e.coordinateToPosition(T));D.setPrivate("visible",!0),I.setPrivate("visible",!0),D.set("draw",Y=>{Y.moveTo(a.x,F),Y.lineTo(r.x,F),Y.lineTo(r.x,T),Y.lineTo(a.x,T),Y.lineTo(a.x,F)}),I.set("draw",Y=>{Y.moveTo(a.x,T),Y.lineTo(r.x,T)});const K=y.dataItem;K&&K.set("value",W),y.setAll({x:r.x,y:T,fill:w}),y.text.markDirtyText(),u=x}}}}}_createElements(t){if(super._createElements(t),!this._fills[t]){const e=[],i=[],s=[],n=this.get("sequence",[]);for(let o=0;o<n.length;o++){const a=this.makeLabel(),r=this.makeDataItem({});r.set("sequence",n[o]),a._setDataItem(r),e.push(a);const l=this.makeFill(this.fills);i.push(l);const c=this.makeStroke(this.strokes);s.push(c)}this._labels[t]=e,this._fills[t]=i,this._strokes[t]=s}}_drawFill(){}_drawStroke(){}_updateLine(){}_clearGraphics(){}enableDrawing(){super.enableDrawing(),this.showAllBullets()}enableErasing(){super.enableErasing(),this.showAllBullets()}_hideAllBullets(){this._drawingEnabled||this._erasingEnabled||super._hideAllBullets()}disposeDataItem(t){super.disposeDataItem(t);const e=t.dataContext;if(e){const i=e.index,s=this._labels[i],n=this._fills[i],o=this._strokes[i];s&&(A.S6(s,a=>{a.dispose(),this.labels.removeValue(a)}),delete this._labels[i]),n&&(A.S6(n,a=>{this.fills.removeValue(a),a.dispose()}),delete this._fills[i]),o&&(A.S6(o,a=>{this.strokes.removeValue(a),a.dispose()}),delete this._strokes[i])}}}Object.defineProperty(ct,"className",{enumerable:!0,configurable:!0,writable:!0,value:"FibonacciSeries"}),Object.defineProperty(ct,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:R.classNames.concat([ct.className])});class At extends ct{constructor(){super(...arguments),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"fibonaccitimezone"})}_updateSegmentReal(t){const e=this._di[t];if(e){const i=e.p1,s=e.p2;if(i&&s){const n=i.get("valueY",0);this._setContext(s,"valueY",n,!0),i.setRaw("locationX",0),s.setRaw("locationX",0)}}}_setXLocation(t,e){this._setXLocationReal(t,e)}_updateChildrenReal(){const t=this.chart;if(t)for(let e=0;e<this._lines.length;e++)if(this._lines[e]){const s=this._di[e].p1,n=this._di[e].p2,o=this._di[e].e,a=s.get("point"),r=n.get("point"),l=s.open,c=n.open,u=this.get("xAxis");if(l&&c&&o){const b=l.valueX,k=c.valueX-b;if(a&&r){const p=o.dataContext,x=this.get("sequence",[]),y=this._labels[e],D=this._fills[e],I=this._strokes[e];for(let w=0;w<x.length;w++){const m=x[w],F=y[w],T=D[w],W=I[w];this.mainContainer.children.moveValue(T,0);const K=b+k*m,Y=a.x,_=u.get("renderer").positionToCoordinate(u.valueToPosition(K)),tt=0,ht=t.plotContainer.height();T.setPrivate("visible",!0),W.setPrivate("visible",!0);const ae=p.fill;let ft=this.get("colors",[])[w],Lt=ft;if(ft||(ae&&(ft=ae.get("fill")),ft||(ft=this.get("fillColor",this.get("fill",(0,dt.$_)(0))))),!Lt){const et=p.stroke;et&&(Lt=et.get("stroke")),Lt||(Lt=this.get("strokeColor",this.get("stroke",(0,dt.$_)(0))))}T.set("fill",ft),W.set("stroke",Lt),T.set("draw",et=>{et.moveTo(Y,tt),et.lineTo(_,tt),et.lineTo(_,ht),et.lineTo(Y,ht),et.lineTo(Y,tt)}),W.set("draw",et=>{et.moveTo(_,tt),et.lineTo(_,ht)});const re=F.dataItem;re&&re.set("value",m),F.setAll({x:_,y:ht,dy:-20}),F.text.markDirtyText()}}}}}}Object.defineProperty(At,"className",{enumerable:!0,configurable:!0,writable:!0,value:"FibonacciTimezoneSeries"}),Object.defineProperty(At,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ct.classNames.concat([At.className])});class Tt extends R{constructor(){super(...arguments),Object.defineProperty(this,"_tag",{enumerable:!0,configurable:!0,writable:!0,value:"ray"})}_updateSegment(t){if(this._di[t]){const e=this._di[t].p1,i=this._di[t].p2,s=this.get("series");if(s&&e&&i){const n=this.get("xAxis"),o=n.getPrivate("min",0)+1,a=n.getPrivate("max",1)-1;let r=Z.C7(i.get("valueX"),o,a);const l=n.getSeriesItem(s,Math.max(0,n.valueToPosition(r))),c=this.get("field")+"Y";if(l){let u=l.get(c);this._setContext(e,"valueY",u,!0),this._setContext(i,"valueY",u,!0),this._setContext(e,"valueX",r),this._setContext(i,"valueX",r+.01),this._positionBullets(e),this._positionBullets(i)}}}this._updateElements()}_updateLine(t,e,i,s,n,o){t.set("points",[n,i]),e.set("points",[n,i])}_setXLocation(){}_handlePointerMoveReal(){}_handlePointerClickReal(t){this._isDragging||(this._index++,this._addPoints(t,this._index),this._isDrawing=!1)}_updateExtensionLine(t,e){t.setAll({stroke:e.get("stroke"),strokeWidth:e.get("strokeWidth"),strokeDasharray:e.get("strokeDasharray"),strokeOpacity:e.get("strokeOpacity")})}}Object.defineProperty(Tt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"HorizontalRaySeries"}),Object.defineProperty(Tt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:R.classNames.concat([Tt.className])});var ge=g(5053),Q=g(8669),te=g(3855),$=g(2334);class Ot extends Q.L{_afterNew(){super._afterNew();const t=te.s.new(this._root,{control:this,parent:this.getPrivate("button")});this.setPrivate("list",t),t.events.on("closed",i=>{this.set("active",!1)}),t.events.on("invoked",i=>{this.setTool(i.item.label),this.events.dispatch("selected",{type:"selected",tool:i.item.id,target:this})}),this.on("active",i=>{i?this.setTimeout(()=>t.show(),10):t.hide()});const e=this.getPrivate("button");e.className=e.className+" am5stock-control-dropdown",this._initTools()}setTool(t){this.getPrivate("icon").innerHTML="",this.getPrivate("icon").appendChild(this._getToolIcon(t)),this._setLabel(this._root.language.translateAny(t))}_initTools(){const t=this.getPrivate("list"),e=this.get("tools"),i=[];A.S6(e,s=>{i.push({id:s,label:this._root.language.translateAny(s),icon:this._getToolIcon(s)})}),t.set("items",i)}_getToolIcon(t){return $.K.getIcon(t)}_afterChanged(){super._afterChanged(),this.isDirty("tools")&&this._initTools()}_dispose(){super._dispose()}}Object.defineProperty(Ot,"className",{enumerable:!0,configurable:!0,writable:!0,value:"DrawingToolControl"}),Object.defineProperty(Ot,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Q.L.classNames.concat([Ot.className])});var pe=g(2299),fe=g(161),q=g(2662),Mt=g(2978);class Xt extends Q.L{_afterNew(){super._afterNew();const t=te.s.new(this._root,{control:this,parent:this.getPrivate("button"),searchable:!1});this.setPrivate("list",t),t.getPrivate("list").className="am5stock-control-icons",t.events.on("closed",e=>{this.set("active",!1)}),t.events.on("invoked",e=>{const i=JSON.parse(e.item.id);let s;const n=this.get("icons");A.S6(n,o=>{i.svgPath==o.svgPath&&(s=o)}),s&&(this.setIcon(s),this.events.dispatch("selected",{type:"selected",icon:s,target:this}))}),this.on("active",e=>{e?this.setTimeout(()=>t.show(),10):t.hide()}),this._initIcons()}setIcon(t){this.getPrivate("icon").innerHTML="",this.getPrivate("icon").appendChild(this._getDrawingIcon(t))}_initIcons(){const t=this.getPrivate("list"),e=this.get("icons"),i=[];A.S6(e,s=>{i.push({id:JSON.stringify(s),label:"",icon:this._getDrawingIcon(s)})}),t.set("items",i)}_getDrawingIcon(t){return $.K._getSVG({viewbox:"0 0 50 50",path:t.svgPath})}_afterChanged(){super._afterChanged(),this.isDirty("icons")&&this._initIcons()}_dispose(){super._dispose()}}Object.defineProperty(Xt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"IconControl"}),Object.defineProperty(Xt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Q.L.classNames.concat([Xt.className])});var ve=g(2887),be=g(2944);class Rt extends Q.L{constructor(){super(...arguments),Object.defineProperty(this,"_drawingSeries",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_currentEnabledSeries",{enumerable:!0,configurable:!0,writable:!0,value:[]})}_afterNew(){super._afterNew(),this.getPrivate("toolbar")&&this._initToolbar()}_initElements(){super._initElements()}_isInited(){return!!this.getPrivate("toolsContainer")}_resetControls(){this.getPrivate("eraserControl").set("active",!1)}_initToolbar(){const t=this.get("stockChart"),e=this._root.language,i=this.getPrivate("toolbar"),s=document.createElement("div");s.className="am5stock-control-drawing-tools",s.style.display="none",this.setPrivate("toolsContainer",s),i.get("container").appendChild(s);const n=Ot.new(this._root,{stockChart:t,description:e.translateAny("Drawing tool"),tools:this.get("tools")});s.appendChild(n.getPrivate("button")),this.setPrivate("toolControl",n),n.events.on("selected",_=>{K.set("active",!1),this.set("tool",_.tool)}),n.events.on("click",this._resetControls,this);const o=this.get("drawingIcons"),a=Xt.new(this._root,{stockChart:t,description:e.translateAny("Arrows &amp; Icons"),icons:o});a.setIcon(this.get("drawingIcon",o[0])),s.appendChild(a.getPrivate("button")),this.setPrivate("iconControl",a),a.events.on("selected",_=>{this.set("drawingIcon",_.icon)}),a.events.on("click",this._resetControls,this);const r=Q.L.new(this._root,{stockChart:t,description:e.translateAny("Snap icon to data"),icon:$.K.getIcon("Snap")});r.hide(),s.appendChild(r.getPrivate("button")),this.setPrivate("snapControl",r),this.get("snapToData")&&r.set("active",!0),r.on("active",_=>{this.set("snapToData",1==r.get("active"))}),r.events.on("click",this._resetControls,this);const l=Mt.t.new(this._root,{stockChart:t,colors:this.get("colors"),description:e.translateAny("Line color")});l.hide(),l.setPrivate("color",this.get("strokeColor",(0,dt.$_)(0))),l.setPrivate("opacity",this.get("strokeOpacity",1)),s.appendChild(l.getPrivate("button")),this.setPrivate("strokeControl",l),l.events.on("selected",_=>{this.set("strokeColor",_.color)}),l.events.on("selectedOpacity",_=>{this.set("strokeOpacity",_.opacity)}),l.events.on("click",this._resetControls,this);const c=[];A.S6(this.get("strokeWidths",[]),_=>{c.push(_+"px")});const u=q.I.new(this._root,{stockChart:t,description:e.translateAny("Line thickness"),currentItem:this.get("strokeWidth","12")+"px",items:c});u.hide(),u.getPrivate("icon").style.display="none",s.appendChild(u.getPrivate("button")),this.setPrivate("strokeWidthControl",u),u.events.on("selected",_=>{this.set("strokeWidth",nt.He(nt.HD(_.item)?_.item:_.item.id))}),u.events.on("click",this._resetControls,this);const b=[];let C;const k=this.get("strokeDasharray",[]);A.S6(this.get("strokeDasharrays",[]),_=>{const tt=$.K.getIcon("Dash"),ht=JSON.stringify(_);tt.setAttribute("stroke","#000"),tt.setAttribute("stroke-dasharray",_.join(",")),tt.setAttribute("class","am5stock-icon-wide"),b.push({id:ht,label:"",icon:tt}),ht==JSON.stringify(k)&&(C=$.K.getIcon("Dash"),C.setAttribute("stroke","#000"),C.setAttribute("stroke-dasharray",_.join(",")),C.setAttribute("class","am5stock-icon-wide"))});const p=q.I.new(this._root,{stockChart:t,description:e.translateAny("Line style"),items:b});p.hide(),C&&p.setItem({id:"",icon:C,label:""}),p.getPrivate("icon").setAttribute("class","am5stock-control-icon am5stock-icon-wide"),s.appendChild(p.getPrivate("button")),this.setPrivate("strokeDasharrayControl",p),p.events.on("selected",_=>{this.set("strokeDasharray",JSON.parse(_.item.id))}),p.events.on("click",this._resetControls,this);const x=Mt.t.new(this._root,{stockChart:t,colors:this.get("colors"),name:e.translateAny("Fill"),description:e.translateAny("Fill color")});x.hide(),x.setPrivate("color",this.get("fillColor",(0,dt.$_)(0))),x.setPrivate("opacity",this.get("fillOpacity",1)),s.appendChild(x.getPrivate("button")),this.setPrivate("fillControl",x),x.events.on("selected",_=>{this.set("fillColor",_.color)}),x.events.on("selectedOpacity",_=>{this.set("fillOpacity",_.opacity)}),x.events.on("click",this._resetControls,this);const y=Mt.t.new(this._root,{stockChart:t,colors:this.get("colors"),name:e.translateAny("Text"),description:e.translateAny("Text color"),useOpacity:!1});y.hide(),y.setPrivate("color",this.get("labelFill",(0,dt.$_)(0))),s.appendChild(y.getPrivate("button")),this.setPrivate("labelFillControl",y),y.events.on("selected",_=>{this.set("labelFill",_.color)}),y.events.on("click",this._resetControls,this);const D=[];A.S6(this.get("labelFontSizes",[]),_=>{D.push(_+"")});const I=q.I.new(this._root,{stockChart:t,description:e.translateAny("Label font size"),currentItem:this.get("labelFontSize","12px")+"",items:D});I.hide(),s.appendChild(I.getPrivate("button")),this.setPrivate("labelFontSizeControl",I),I.events.on("selected",_=>{this.set("labelFontSize",nt.HD(_.item)?_.item:_.item.id)}),I.events.on("click",this._resetControls,this);const w=Q.L.new(this._root,{stockChart:t,description:e.translateAny("Bold"),icon:$.K.getIcon("Bold")});w.hide(),s.appendChild(w.getPrivate("button")),this.setPrivate("boldControl",w),w.on("active",_=>{this.set("labelFontWeight",w.get("active")?"bold":"normal")}),w.events.on("click",this._resetControls,this);const m=Q.L.new(this._root,{stockChart:t,description:e.translateAny("Italic"),icon:$.K.getIcon("Italic")});m.hide(),s.appendChild(m.getPrivate("button")),this.setPrivate("italicControl",m),m.on("active",_=>{this.set("labelFontStyle",m.get("active")?"italic":"normal")}),m.events.on("click",this._resetControls,this);const F=[];A.S6(this.get("labelFontFamilies",[]),_=>{F.push(_+"")});const T=q.I.new(this._root,{stockChart:t,description:e.translateAny("Label font family"),currentItem:this.get("labelFontFamily","Arial"),items:F});T.hide(),s.appendChild(T.getPrivate("button")),this.setPrivate("labelFontFamilyControl",T),T.events.on("selected",_=>{this.set("labelFontFamily",nt.HD(_.item)?_.item:_.item.id)}),T.events.on("click",this._resetControls,this);const W=Q.L.new(this._root,{stockChart:t,description:e.translateAny("Show line extension"),icon:$.K.getIcon("Show Extension")});W.hide(),s.appendChild(W.getPrivate("button")),this.setPrivate("extensionControl",W),this.get("showExtension")&&W.set("active",!0),W.on("active",_=>{this.set("showExtension",1==W.get("active"))}),W.events.on("click",this._resetControls,this);const K=Q.L.new(this._root,{stockChart:t,description:e.translateAny("Eraser"),icon:$.K.getIcon("Eraser")});s.appendChild(K.getPrivate("button")),this.setPrivate("eraserControl",K),K.on("active",_=>{const tt=K.get("active",!1);this.setEraser(tt)});const Y=Q.L.new(this._root,{stockChart:t,name:e.translateAny("Clear"),description:e.translateAny("Clear all drawings"),icon:$.K.getIcon("Clear"),togglable:!1});s.appendChild(Y.getPrivate("button")),this.setPrivate("clearControl",Y),this._disposers.push(gt.Oo(Y.getPrivate("button"),"click",_=>{K.set("active",!1),this.clearDrawings()})),this.get("active")&&this._setTool(this.get("tool"))}setEraser(t){U.S6(this._drawingSeries,(e,i)=>{A.S6(i,s=>{t?s.enableErasing():s.disableErasing()})})}clearDrawings(){U.S6(this._drawingSeries,(t,e)=>{A.S6(e,i=>{i.clearDrawings()})})}_beforeChanged(){super._beforeChanged();const t=this._isInited();if(this.isDirty("tools")){const e=this.getPrivate("toolControl");e&&e.set("tools",this.get("tools"))}this.isPrivateDirty("toolbar")&&this.getPrivate("toolbar")&&this._initToolbar(),this.isDirty("active")&&(this.get("active")?(t&&(this.getPrivate("toolsContainer").style.display="block"),this._setTool(this.get("tool"))):(t&&(this.getPrivate("toolsContainer").style.display="none"),this._setTool())),this.isDirty("tool")&&this.get("active")&&this._setTool(this.get("tool")),(this.isDirty("strokeColor")||this.isDirty("strokeWidth")||this.isDirty("strokeOpacity")||this.isDirty("strokeDasharray"))&&this._setStroke(),(this.isDirty("fillColor")||this.isDirty("fillOpacity"))&&this._setFill(),(this.isDirty("labelFill")||this.isDirty("labelFontSize")||this.isDirty("labelFontFamily")||this.isDirty("labelFontWeight")||this.isDirty("labelFontStyle"))&&this._setLabel(),this.isDirty("showExtension")&&this._setExtension(),this.isDirty("drawingIcon")&&this._setDrawingIcon(),this.isDirty("snapToData")&&this._setSnap()}_setTool(t){const e=this._isInited();if(A.S6(this._currentEnabledSeries,n=>{n.disableDrawing()}),this._currentEnabledSeries=[],!t)return void(e&&this.getPrivate("eraserControl").set("active",!1));let s;this._maybeInitToolSeries(t),A.S6(this._drawingSeries[t],n=>{s!==n.chart&&(n.enableDrawing(),this._currentEnabledSeries.push(n),s=n.chart)}),e&&(this.getPrivate("toolControl").setTool(t),U.S6({strokeControl:["Average","Callout","Doodle","Ellipse","Fibonacci","Fibonacci Timezone","Horizontal Line","Horizontal Ray","Arrows &amp; Icons","Line","Polyline","Quadrant Line","Rectangle","Regression","Trend Line","Vertical Line"],strokeWidthControl:["Average","Doodle","Ellipse","Horizontal Line","Horizontal Ray","Line","Polyline","Quadrant Line","Rectangle","Regression","Trend Line","Vertical Line"],strokeDasharrayControl:["Average","Doodle","Ellipse","Horizontal Line","Horizontal Ray","Line","Polyline","Quadrant Line","Rectangle","Regression","Trend Line","Vertical Line"],extensionControl:["Average","Line","Regression","Trend Line"],fillControl:["Callout","Ellipse","Quadrant Line","Rectangle","Arrows &amp; Icons","Fibonacci Timezone"],labelFillControl:["Callout","Label"],labelFontSizeControl:["Callout","Label"],labelFontFamilyControl:["Callout","Label"],boldControl:["Callout","Label"],italicControl:["Callout","Label"],iconControl:["Arrows &amp; Icons"],snapControl:["Callout","Arrows &amp; Icons"]},(o,a)=>{const r=this.getPrivate(o);-1==a.indexOf(t)?r.hide():r.show()}))}_maybeInitToolSeries(t){let e=this._drawingSeries[t];if(!e){const i=this.get("series",[]),s=this.get("stockChart");0==i.length&&s.panels.each(n=>{n.series.length>0&&i.push(n.series.getIndex(0))}),e=[],A.S6(i,n=>{let o;const a=n.get("xAxis"),r=n.get("yAxis"),l=n.chart;switch(t){case"Average":o=yt.new(this._root,{series:n,xAxis:a,yAxis:r,field:"value"});break;case"Callout":o=pt.new(this._root,{xAxis:a,yAxis:r});break;case"Doodle":o=St.new(this._root,{xAxis:a,yAxis:r}),o.fills.template.setAll({forceHidden:!0});break;case"Ellipse":o=Dt.new(this._root,{xAxis:a,yAxis:r});break;case"Fibonacci":o=ct.new(this._root,{xAxis:a,yAxis:r});break;case"Fibonacci Timezone":o=At.new(this._root,{xAxis:a,yAxis:r});break;case"Horizontal Line":o=Ct.new(this._root,{xAxis:a,yAxis:r});break;case"Horizontal Ray":o=Tt.new(this._root,{series:n,xAxis:a,yAxis:r,field:"value"});break;case"Arrows &amp; Icons":const c=this.get("drawingIcon",this.get("drawingIcons")[0]);o=rt.new(this._root,{xAxis:a,yAxis:r,iconSvgPath:c.svgPath,iconScale:c.scale,iconCenterX:c.centerX,iconCenterY:c.centerY});break;case"Label":o=lt.new(this._root,{xAxis:a,yAxis:r});break;case"Line":o=R.new(this._root,{xAxis:a,yAxis:r});break;case"Polyline":o=st.new(this._root,{xAxis:a,yAxis:r}),o.fills.template.setAll({forceHidden:!0});break;case"Quadrant Line":o=It.new(this._root,{series:n,xAxis:a,yAxis:r,field:"value"});break;case"Rectangle":o=_t.new(this._root,{xAxis:a,yAxis:r});break;case"Regression":o=wt.new(this._root,{series:n,xAxis:a,yAxis:r,field:"value"});break;case"Trend Line":o=kt.new(this._root,{series:n,xAxis:a,yAxis:r,field:"value"});break;case"Vertical Line":o=Pt.new(this._root,{xAxis:a,yAxis:r})}o&&(e.push(o),l.drawings.push(o),o.setPrivate("baseValueSeries",n),o.set("valueYShow",n.get("valueYShow")),o.set("calculateAggregates",!0))}),this._drawingSeries[t]=e,this._setStroke(),this._setFill(),this._setLabel(),this._setDrawingIcon(),this._setSnap(),this._setExtension()}}_setStroke(){U.S6(this._drawingSeries,(t,e)=>{A.S6(e,i=>{i.setAll({strokeColor:this.get("strokeColor"),strokeWidth:this.get("strokeWidth"),strokeOpacity:this.get("strokeOpacity"),strokeDasharray:this.get("strokeDasharray")})})})}_setFill(){U.S6(this._drawingSeries,(t,e)=>{A.S6(e,i=>{i.setAll({fillColor:this.get("fillColor"),fillOpacity:this.get("fillOpacity")})})})}_setLabel(){const t=["Callout","Label"];U.S6(this._drawingSeries,(e,i)=>{-1!=t.indexOf(e)&&A.S6(i,s=>{s.setAll({labelFill:this.get("labelFill"),labelFontSize:this.get("labelFontSize"),labelFontFamily:this.get("labelFontFamily"),labelFontWeight:this.get("labelFontWeight"),labelFontStyle:this.get("labelFontStyle")})})})}_setExtension(){U.S6(this._drawingSeries,(t,e)=>{A.S6(e,i=>{i instanceof R&&i.setAll({showExtension:this.get("showExtension")})})})}_setDrawingIcon(){if(!this._isInited())return;const t=this.get("drawingIcon",this.get("drawingIcons")[0]),e=this.getPrivate("fillControl");t.fillDisabled?e.hide():e.show(),U.S6(this._drawingSeries,(i,s)=>{A.S6(s,n=>{n instanceof rt&&n.setAll({iconSvgPath:t.svgPath,iconScale:t.scale,iconCenterX:t.centerX,iconCenterY:t.centerY,fillOpacity:t.fillDisabled?0:this.get("fillOpacity")})})})}_setSnap(){const t=this.get("snapToData",!1);U.S6(this._drawingSeries,(e,i)=>{A.S6(i,s=>{(s instanceof rt||s instanceof pt)&&s.setAll({snapToData:t})})})}_getDefaultIcon(){return $.K.getIcon("Draw")}_dispose(){super._dispose(),gt.bX(this.getPrivate("toolsContainer"))}_getSeriesTool(t){if(t instanceof H){let e=t.className;return"SimpleLineSeries"==e?"Line":"IconSeries"==e?"Arrows &amp; Icons":(e=gt.w8(e.replace("Series","")),e)}}serializeDrawings(t="string",e){const i=[];return this.get("stockChart").panels.each((s,n)=>{s.series.each(o=>{if(o.isType("DrawingSeries")){const a=be.e.new(this.root,{includeSettings:["strokeColor","fillColor","strokeOpacity","fillOpacity","strokeWidth","strokeDasharray","field","snapToData","svgPath","labelFontSize","labelFontFamily","labelFontWeight","labelFontStyle","labelFill","showExtension"],maxDepth:4});o.data.values.map(l=>{l.__parse=!0});const r={__tool:this._getSeriesTool(o),__panelIndex:n,__drawing:a.serialize(o.data.values,0,!0)};i.push(r)}})}),"object"==t?i:JSON.stringify(i,void 0,e)}unserializeDrawings(t){const e=this.get("stockChart");nt.HD(t)&&(t=JSON.parse(t)),nt.kJ(t)||(t=[t]),A.S6(t,i=>{let s=e.panels.getIndex(i.__panelIndex||0);const n=i.__tool;let o;this._maybeInitToolSeries(n),A.S6(this._drawingSeries[n]||[],a=>{a.chart===s&&(o=a)}),i.settings||(i.settings={}),ve.z.new(this._root).parse(i.__drawing).then(a=>{o.data.pushAll(a)})})}}Object.defineProperty(Rt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"DrawingControl"}),Object.defineProperty(Rt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Q.L.classNames.concat([Rt.className])});var xe=g(9371),me=g(82),_e=g(2941);class zt extends q.I{}Object.defineProperty(zt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"SeriesTypeControl"}),Object.defineProperty(zt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:q.I.classNames.concat([zt.className])});class Wt extends q.I{_getDefaultIcon(){return $.K.getIcon("Interval")}}Object.defineProperty(Wt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"IntervalControl"}),Object.defineProperty(Wt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:q.I.classNames.concat([Wt.className])});var Ce=g(2655),Pe=g(4620);class Ht extends q.I{_getDefaultIcon(){return $.K.getIcon("Comparison")}}Object.defineProperty(Ht,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ComparisonControl"}),Object.defineProperty(Ht,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:q.I.classNames.concat([Ht.className])})},7194:function(Kt,Ut){var g,vt;g=function(Nt){"use strict";var xt=Object.assign||function(L){for(var d=1;d<arguments.length;d++){var f=arguments[d];for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(L[h]=f[h])}return L};function Jt(L){if(Array.isArray(L)){for(var d=0,f=Array(L.length);d<L.length;d++)f[d]=L[d];return f}return Array.from(L)}var Qt={order:2,precision:2,period:null};function ot(L,d){var f=[],h=[];L.forEach(function(S,O){null!==S[1]&&(h.push(S),f.push(d[O]))});var v=h.reduce(function(S,O){return S+O[1]},0)/h.length,B=h.reduce(function(S,O){var E=O[1]-v;return S+E*E},0);return 1-h.reduce(function(S,O,E){var N=O[1]-f[E][1];return S+N*N},0)/B}function X(L,d){var f=Math.pow(10,d);return Math.round(L*f)/f}var Yt={linear:function(d,f){for(var h=[0,0,0,0,0],P=0,v=0;v<d.length;v++)null!==d[v][1]&&(P++,h[0]+=d[v][0],h[1]+=d[v][1],h[2]+=d[v][0]*d[v][0],h[3]+=d[v][0]*d[v][1],h[4]+=d[v][1]*d[v][1]);var B=P*h[2]-h[0]*h[0],S=0===B?0:X((P*h[3]-h[0]*h[1])/B,f.precision),O=X(h[1]/P-S*h[0]/P,f.precision),E=function(z){return[X(z,f.precision),X(S*z+O,f.precision)]},V=d.map(function(N){return E(N[0])});return{points:V,predict:E,equation:[S,O],r2:X(ot(d,V),f.precision),string:0===O?"y = "+S+"x":"y = "+S+"x + "+O}},exponential:function(d,f){for(var h=[0,0,0,0,0,0],P=0;P<d.length;P++)null!==d[P][1]&&(h[0]+=d[P][0],h[1]+=d[P][1],h[2]+=d[P][0]*d[P][0]*d[P][1],h[3]+=d[P][1]*Math.log(d[P][1]),h[4]+=d[P][0]*d[P][1]*Math.log(d[P][1]),h[5]+=d[P][0]*d[P][1]);var v=h[1]*h[2]-h[5]*h[5],B=Math.exp((h[2]*h[3]-h[5]*h[4])/v),M=(h[1]*h[4]-h[5]*h[3])/v,S=X(B,f.precision),O=X(M,f.precision),E=function(z){return[X(z,f.precision),X(S*Math.exp(O*z),f.precision)]},V=d.map(function(N){return E(N[0])});return{points:V,predict:E,equation:[S,O],string:"y = "+S+"e^("+O+"x)",r2:X(ot(d,V),f.precision)}},logarithmic:function(d,f){for(var h=[0,0,0,0],P=d.length,v=0;v<P;v++)null!==d[v][1]&&(h[0]+=Math.log(d[v][0]),h[1]+=d[v][1]*Math.log(d[v][0]),h[2]+=d[v][1],h[3]+=Math.pow(Math.log(d[v][0]),2));var M=X((P*h[1]-h[2]*h[0])/(P*h[3]-h[0]*h[0]),f.precision),S=X((h[2]-M*h[0])/P,f.precision),O=function(N){return[X(N,f.precision),X(X(S+M*Math.log(N),f.precision),f.precision)]},E=d.map(function(V){return O(V[0])});return{points:E,predict:O,equation:[S,M],string:"y = "+S+" + "+M+" ln(x)",r2:X(ot(d,E),f.precision)}},power:function(d,f){for(var h=[0,0,0,0,0],P=d.length,v=0;v<P;v++)null!==d[v][1]&&(h[0]+=Math.log(d[v][0]),h[1]+=Math.log(d[v][1])*Math.log(d[v][0]),h[2]+=Math.log(d[v][1]),h[3]+=Math.pow(Math.log(d[v][0]),2));var B=(P*h[1]-h[0]*h[2])/(P*h[3]-Math.pow(h[0],2)),S=X(Math.exp((h[2]-B*h[0])/P),f.precision),O=X(B,f.precision),E=function(z){return[X(z,f.precision),X(X(S*Math.pow(z,O),f.precision),f.precision)]},V=d.map(function(N){return E(N[0])});return{points:V,predict:E,equation:[S,O],string:"y = "+S+"x^"+O,r2:X(ot(d,V),f.precision)}},polynomial:function(d,f){for(var h=[],P=[],v=0,B=0,M=d.length,S=f.order+1,O=0;O<S;O++){for(var E=0;E<M;E++)null!==d[E][1]&&(v+=Math.pow(d[E][0],O)*d[E][1]);h.push(v),v=0;for(var V=[],N=0;N<S;N++){for(var z=0;z<M;z++)null!==d[z][1]&&(B+=Math.pow(d[z][0],O+N));V.push(B),B=0}P.push(V)}P.push(h);for(var J=function $t(L,d){for(var f=L,h=L.length-1,P=[d],v=0;v<h;v++){for(var B=v,M=v+1;M<h;M++)Math.abs(f[v][M])>Math.abs(f[v][B])&&(B=M);for(var S=v;S<h+1;S++){var O=f[S][v];f[S][v]=f[S][B],f[S][B]=O}for(var E=v+1;E<h;E++)for(var V=h;V>=v;V--)f[V][E]-=f[V][v]*f[v][E]/f[v][v]}for(var N=h-1;N>=0;N--){for(var z=0,J=N+1;J<h;J++)z+=f[J][N]*P[J];P[N]=(f[h][N]-z)/f[N][N]}return P}(P,S).map(function(at){return X(at,f.precision)}),Ft=function(mt){return[X(mt,f.precision),X(J.reduce(function(jt,Zt,G){return jt+Zt*Math.pow(mt,G)},0),f.precision)]},Vt=d.map(function(at){return Ft(at[0])}),ut="y = ",it=J.length-1;it>=0;it--)ut+=it>1?J[it]+"x^"+it+" + ":1===it?J[it]+"x + ":J[it];return{string:ut,points:Vt,predict:Ft,equation:[].concat(Jt(J)).reverse(),r2:X(ot(d,Vt),f.precision)}}};Nt.exports=function Gt(){return Object.keys(Yt).reduce(function(f,h){return xt({_round:X},f,function bt(L,d,f){return d in L?Object.defineProperty(L,d,{value:f,enumerable:!0,configurable:!0,writable:!0}):L[d]=f,L}({},h,function(P,v){return Yt[h](P,xt({},Qt,v))}))},{})}()},void 0!==(vt=g.apply(Ut,[Kt]))&&(Kt.exports=vt)}}]);